function AkaHTML5MediaAnalytics(b8){var cH="$Id: //projects/agents/analytics-player-html5-plugin-3.4/akamai/analytics-player-html5-plugin/akamaihtml5.js#3 $";function D(){return(((1+Math.random())*65536)|0).toString(16).substring(1)}function cI(){return(D()+D()+"-"+D()+"-"+D()+"-"+D()+"-"+D()+D()+D())}var bh=bh||function(cQ,cO){var cR={},cT=cR.lib={},cK=cT.Base=function(){function cV(){}return{extend:function(cW){cV.prototype=this;var cX=new cV;cW&&cX.mixIn(cW);cX.$super=this;return cX},create:function(){var cW=this.extend();cW.init.apply(cW,arguments);return cW},init:function(){},mixIn:function(cW){for(var cX in cW){cW.hasOwnProperty(cX)&&(this[cX]=cW[cX])}cW.hasOwnProperty("toString")&&(this.toString=cW.toString)},clone:function(){return this.$super.extend(this)}}}(),cL=cT.WordArray=cK.extend({init:function(cV,cW){cV=this.words=cV||[];this.sigBytes=cW!=cO?cW:4*cV.length},toString:function(cV){return(cV||cS).stringify(this)},concat:function(cW){var cX=this.words,cZ=cW.words,cY=this.sigBytes,cW=cW.sigBytes;this.clamp();if(cY%4){for(var cV=0;cV<cW;cV++){cX[cY+cV>>>2]|=(cZ[cV>>>2]>>>24-8*(cV%4)&255)<<24-8*((cY+cV)%4)}}else{if(65535<cZ.length){for(cV=0;cV<cW;cV+=4){cX[cY+cV>>>2]=cZ[cV>>>2]}}else{cX.push.apply(cX,cZ)}}this.sigBytes+=cW;return this},clamp:function(){var cV=this.words,cW=this.sigBytes;cV[cW>>>2]&=4294967295<<32-8*(cW%4);cV.length=cQ.ceil(cW/4)},clone:function(){var cV=cK.clone.call(this);cV.words=this.words.slice(0);return cV},random:function(cV){for(var cW=[],cX=0;cX<cV;cX+=4){cW.push(4294967296*cQ.random()|0)}return cL.create(cW,cV)}}),e=cR.enc={},cS=e.Hex={stringify:function(cW){for(var cX=cW.words,cW=cW.sigBytes,cZ=[],cV=0;cV<cW;cV++){var cY=cX[cV>>>2]>>>24-8*(cV%4)&255;cZ.push((cY>>>4).toString(16));cZ.push((cY&15).toString(16))}return cZ.join("")},parse:function(cW){for(var cX=cW.length,cY=[],cV=0;cV<cX;cV+=2){cY[cV>>>3]|=parseInt(cW.substr(cV,2),16)<<24-4*(cV%8)}return cL.create(cY,cX/2)}},cN=e.Latin1={stringify:function(cW){for(var cX=cW.words,cW=cW.sigBytes,cV=[],cY=0;cY<cW;cY++){cV.push(String.fromCharCode(cX[cY>>>2]>>>24-8*(cY%4)&255))}return cV.join("")},parse:function(cW){for(var cV=cW.length,cY=[],cX=0;cX<cV;cX++){cY[cX>>>2]|=(cW.charCodeAt(cX)&255)<<24-8*(cX%4)}return cL.create(cY,cV)}},cM=e.Utf8={stringify:function(cW){try{return decodeURIComponent(escape(cN.stringify(cW)))}catch(cV){throw Error("Malformed UTF-8 data")}},parse:function(cV){return cN.parse(unescape(encodeURIComponent(cV)))}},cP=cT.BufferedBlockAlgorithm=cK.extend({reset:function(){this._data=cL.create();this._nDataBytes=0},_append:function(cV){"string"==typeof cV&&(cV=cM.parse(cV));this._data.concat(cV);this._nDataBytes+=cV.sigBytes},_process:function(cW){var cV=this._data,c1=cV.words,c0=cV.sigBytes,cX=this.blockSize,cY=c0/(4*cX),cY=cW?cQ.ceil(cY):cQ.max((cY|0)-this._minBufferSize,0),cW=cY*cX,c0=cQ.min(4*cW,c0);if(cW){for(var cZ=0;cZ<cW;cZ+=cX){this._doProcessBlock(c1,cZ)}cZ=c1.splice(0,cW);cV.sigBytes-=c0}return cL.create(cZ,c0)},clone:function(){var cV=cK.clone.call(this);cV._data=this._data.clone();return cV},_minBufferSize:0});cT.Hasher=cP.extend({init:function(){this.reset()},reset:function(){cP.reset.call(this);this._doReset()},update:function(cV){this._append(cV);this._process();return this},finalize:function(cV){cV&&this._append(cV);this._doFinalize();return this._hash},clone:function(){var cV=cP.clone.call(this);cV._hash=this._hash.clone();return cV},blockSize:16,_createHelper:function(cV){return function(cW,cX){return cV.create(cX).finalize(cW)}},_createHmacHelper:function(cV){return function(cW,cX){return cU.HMAC.create(cV,cX).finalize(cW)}}});var cU=cR.algo={};return cR}(Math);(function(){var cM=bh,cL=cM.lib,cN=cL.WordArray,cL=cL.Hasher,cK=[],e=cM.algo.SHA1=cL.extend({_doReset:function(){this._hash=cN.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(cT,cO){for(var cV=this._hash.words,cQ=cV[0],cP=cV[1],cR=cV[2],cS=cV[3],cX=cV[4],cU=0;80>cU;cU++){if(16>cU){cK[cU]=cT[cO+cU]|0}else{var cW=cK[cU-3]^cK[cU-8]^cK[cU-14]^cK[cU-16];cK[cU]=cW<<1|cW>>>31}cW=(cQ<<5|cQ>>>27)+cX+cK[cU];cW=20>cU?cW+((cP&cR|~cP&cS)+1518500249):40>cU?cW+((cP^cR^cS)+1859775393):60>cU?cW+((cP&cR|cP&cS|cR&cS)-1894007588):cW+((cP^cR^cS)-899497514);cX=cS;cS=cR;cR=cP<<30|cP>>>2;cP=cQ;cQ=cW}cV[0]=cV[0]+cQ|0;cV[1]=cV[1]+cP|0;cV[2]=cV[2]+cR|0;cV[3]=cV[3]+cS|0;cV[4]=cV[4]+cX|0},_doFinalize:function(){var cO=this._data,cQ=cO.words,cR=8*this._nDataBytes,cP=8*cO.sigBytes;cQ[cP>>>5]|=128<<24-cP%32;cQ[(cP+64>>>9<<4)+15]=cR;cO.sigBytes=4*cQ.length;this._process()}});cM.SHA1=cL._createHelper(e);cM.HmacSHA1=cL._createHmacHelper(e)})();(function(){var cK=bh,e=cK.enc.Utf8;cK.algo.HMAC=cK.lib.Base.extend({init:function(cR,cT){cR=this._hasher=cR.create();"string"==typeof cT&&(cT=e.parse(cT));var cQ=cR.blockSize,cM=4*cQ;cT.sigBytes>cM&&(cT=cR.finalize(cT));for(var cL=this._oKey=cT.clone(),cS=this._iKey=cT.clone(),cO=cL.words,cN=cS.words,cP=0;cP<cQ;cP++){cO[cP]^=1549556828,cN[cP]^=909522486}cL.sigBytes=cS.sigBytes=cM;this.reset()},reset:function(){var cL=this._hasher;cL.reset();cL.update(this._iKey)},update:function(cL){this._hasher.update(cL);return this},finalize:function(cM){var cL=this._hasher,cM=cL.finalize(cM);cL.reset();return cL.finalize(this._oKey.clone().concat(cM))}})})();(function(){var cN=bh,cM=cN.lib,cO=cM.Base,cK=cM.WordArray,cM=cN.algo,e=cM.HMAC,cL=cM.PBKDF2=cO.extend({cfg:cO.extend({keySize:4,hasher:cM.SHA1,iterations:1}),init:function(cP){this.cfg=this.cfg.extend(cP)},compute:function(cX,cZ){for(var cW=this.cfg,cT=e.create(cW.hasher,cX),cV=cK.create(),cU=cK.create([1]),c1=cV.words,cY=cU.words,c0=cW.keySize,cW=cW.iterations;c1.length<c0;){var cS=cT.update(cZ).finalize(cU);cT.reset();for(var cQ=cS.words,c3=cQ.length,cP=cS,c4=1;c4<cW;c4++){cP=cT.finalize(cP);cT.reset();for(var c2=cP.words,cR=0;cR<c3;cR++){cQ[cR]^=c2[cR]}}cV.concat(cS);cY[0]++}cV.sigBytes=4*c0;return cV}});cN.PBKDF2=function(cP,cR,cQ){return cL.create(cQ).compute(cP,cR)}})();function bL(cQ,cN){if(cQ==null||cQ==""){return}var cL=/(\w+):\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/;try{var cK=cL.exec(cQ);cN.protocol=cK[1];cN.hostName=cK[2];cN.port=cK[3]?cK[3]:"80";cN.path=cK[4];var cP=cN.path.split("/");var cM=cP.length;cN.streamName=cP[cM-1];if(cN.streamName.indexOf(".m3u")!=-1){if(cM>=3){cN.streamName=cP[cM-2]+"/"+cP[cM-1]}}cN.hash=cK[5]?cK[5]:"";cN.search=cK[6]?cK[6]:"";cN.host=cN.hostName+":"+cN.port}catch(cO){bn("Exception,  parseStreamUrl :"+cO)}}function bE(){return new Date().getTime()}var S=false;if(window){try{S=window.XDomainRequest?true:false}catch(bK){S=false}}var a0={};var R={};var a9=null;var bV={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:""};var b4={title:false,category:false,subCategory:false,show:false,contentLength:false,contentType:false,device:false,deliveryType:false,playerId:false,eventName:false};var ax={};var bU={};ax.isBrightcoveVideo=false;ax.objectBased=false;ax.videoPassed=false;var af=false;var K=false;var aI=false;var au={};var bs={};var cc=false;var cq=[];var bi={};var bd=[];var aL={};var br={};var l={};var aD={};var b3={};var ad={};var bC={};var F=100;var b9={};var X=false;var c={fastTCPFailed:false,fastTCPEnabled:false};var b6=[];var ba={};ba.dataSent={};var bJ=1;var aB=-1;var bT={};var u=[];var H={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:false,logStoredMsg:true,printException:false};function ah(){this.aisRetries=0;this.aisRequestLimit=3;this.aisRequestInterval=30000;this.requestFailed=false}var bI=new ah();var x={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=false;this.isAdStarted=false;this.id="";this.type="0";this.startPos="0";this.playBucket="-1";this.endStatus="2";this.adLoadTime=null;this.adStartTime=null;this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++){this[this.setDataArr[e]]=""}}};var bQ={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[];this.currentBitRate="-";this.bitRateCount={};this.bitRatePlayTime={}},updateBitRateArr:function(cL){if(this.bitRateArr.length>0){var e=this.bitRateArr.length;var cK=bQ.bitRateArr[e-1];if((this.currentBitRate==cK.bitRate)){cK.playTime+=cL}else{this.pushInBitRateArr(cL,this.currentBitRate,this.currentStartPos)}}else{this.pushInBitRateArr(cL,this.currentBitRate,this.currentStartPos)}},pushInBitRateArr:function(cL,e,cK){this.bitRateArr.push({bitRate:e,playTime:cL,startPos:cK})},populateBitRateBucketMap:function(e,cO){var cL,cM=false;var cK=bC.bitRateBucketTimes;if(e!="-"&&e!==""){e=parseInt(e/1000)}for(var cN in cK){cM=false;cL=cK[cN];if(e=="-"||e===""||e<0){if(!cL.max&&!cL.min){cM=true;break}}else{if(cL.max&&cL.min){if(e>=cL.min&&e<cL.max){cM=true;break}}else{if(cL.max){if(e<cL.max){cM=true;break}}else{if(cL.min){if(e>=cL.min){cM=true;break}}}}}}if(cM){this.bitRateBucketMap[cN]+=cO}},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var cK=0,cL=-1;for(var cM in this.bitRatePlayTime){if(this.bitRatePlayTime[cM]>cL){cL=this.bitRatePlayTime[cM];cK=cM}}if(cK!==0){return cK}}}catch(cN){bn("Exception, find max persistent bit rate")}},getTransitionSession:function(cQ){try{var cM=null;var cL,cU,cN="";var cO=0,cR,cT=0,cK=0;var cP=true;if(this.bitRateArr.length>0){cL=this.bitRateArr[0];if(cL.bitRate=="-"){cP=false;if(this.bitRateArr[1]&&this.bitRateArr[1].bitRate!="-"){cP=true;this.bitRateArr[1].startPos=this.bitRateArr[0].startPos;this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime;this.bitRateArr.shift()}}}for(cU in this.bitRateBucketMap){this.bitRateBucketMap[cU]=0}for(cO=0;cO<this.bitRateArr.length;cO++){cL=this.bitRateArr[cO];if(cL.bitRate in this.bitRateCount){if(cO!=0){this.bitRateCount[cL.bitRate]++}}else{this.bitRateCount[cL.bitRate]=1}if(cL.bitRate!=""&&cL.bitRate!="-"){if(cL.bitRate in this.bitRatePlayTime){this.bitRatePlayTime[cL.bitRate]+=cL.playTime}else{this.bitRatePlayTime[cL.bitRate]=cL.playTime}}cR=this.bitRateCount[cL.bitRate];if(cM){cM+=","+cL.bitRate+":"+cL.startPos+":"+cL.playTime+"::"+cR}else{cM=cL.bitRate+":"+cL.startPos+":"+cL.playTime+"::"+cR}this.populateBitRateBucketMap(cL.bitRate,cL.playTime);try{if(cP){cT+=cL.bitRate*cL.playTime;cK+=cL.playTime}}catch(cS){}}cQ.maxPersistentBitRate=this.findMaxPersistentBitRate();cQ.transitionStreamTimeSession=cM;for(cU in this.bitRateBucketMap){if(cN){cN+=","+cU+":"+this.bitRateBucketMap[cU]}else{cN=cU+":"+this.bitRateBucketMap[cU]}}cQ.bitRateBucketTimes=cN;try{if(cP&&cK&&cK!=0){cQ.averagedBitRate=cT+":"+cK}}catch(cS){}}catch(cS){bn("Exception, get transition Session :"+cS)}}};var bl="";var cG=function(){if(typeof(akamaiBCVideoObject)!="undefined"){try{var cQ=document.getElementsByTagName("script");var cO=0;var cM="";if(cQ.length){for(cO=0;cO<cQ.length;cO++){if((cQ[cO].src!=null)&&((cQ[cO].src.indexOf("79423.analytics.edgesuite.net")!=-1)||(cQ[cO].src.indexOf("79423.analytics.edgekey.net")!=-1))){bl=cQ[cO].src;cM=E("configPath",cQ[cO].src);if(cM!=""){au.url=cM}}}}}catch(cP){}}else{au.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}if(au.url){var cR=parseInt(E("enableGenericAPI",au.url));if(cR==1){ax.objectBased=true}au.beaconSent=parseInt(E("beaconSentNotify",au.url));var cL=parseInt(E("setVideoObject",au.url));if(cL==1){ax.videoPassed=true}var cK=parseInt(E("subscribeVideo",au.url));if(cK==1){ax.videoPassed=true}var cN=parseInt(E("exception",au.url));if(cN==1){H.printException=true}H.configURLCsmaDebug=parseInt(E("debug",au.url))}}();try{if(window){if(window.top&&window.top.location){H.pageURLCsmaDebug=parseInt(E("AkamaiAnalytics_debug",window.top.location))}else{H.pageURLCsmaDebug=parseInt(E("AkamaiAnalytics_debug",window.location))}}}catch(bK){}try{var bw="";var cx="";regex=/-([0-9\.]+)/;match=regex.exec(cH);bw=match[1]?match[1]:"1.0";regex=/#([0-9]+)/;match=regex.exec(cH);cx=match?(match[1]?match[1]:"0"):"0";bw=bw+"."+cx;if(typeof(akamaiBCVideoObject)!="undefined"&&typeof(brightcovePerforceVersion)!="undefined"){a1("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}}catch(bK){bn("Exception,  pluginVersion: "+bK);bw="1.0"}function aK(){if(H.windowOpened){return}if(H.pageURLCsmaDebug==1||H.configURLCsmaDebug==1||H.configDebug==1){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){return}var e="HTML5-"+bw;if("pluginVersion" in R){e=e+":"+R.pluginVersion}AkamaiAnalytics_debugWindow_data={version:e};o("http://79423.analytics.edgesuite.net/csma/debug/DebugWindow.js","AkamaiAnalytics_debug");H.windowOpened=true;cu(j,"http://79423.analytics.edgesuite.net/plugins/release-details/latest/html5.xml",false);V()}}aK();function V(){try{var cK=au.url.toLowerCase();var cM="";if(cK.indexOf(".edgesuite.net/")==-1&&cK.indexOf(".edgekey.net/")==-1){cM="Incorrect Beacon XML Path";cM+="<ul style='list-style-type:circle;margin:0'>";cM+="<li>We have identified that the Beacon XML in not loaded from an Akamai Domain.</li>";cM+="<li>Kindly use the same Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";bn(cM,"ERROR")}}catch(cL){}}function bt(){try{var cL=l.beaconUrl.toLowerCase();var cM="";if(cL.indexOf(".edgesuite.net/")==-1&&cL.indexOf(".edgekey.net/")==-1){cM="Beacons sent to incorrect domain : "+cL;cM+="<ul style='list-style-type:circle;margin:0'>";cM+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>";cM+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>";bn(cM,"ERROR")}}catch(cK){}}function aP(){try{var cK="";for(var cM in b4){if(b4[cM]){if(!(cM in a0)){if(cK){cK+=", "+cM}else{cK=cM}}}}if(cK){cK="Following dimensons have not being set : "+cK;cK+="<ul style='list-style-type:circle;margin:0'>";cK+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>";bn(cK,"INTEGRATION")}}catch(cL){}}function j(cU){try{var cL=cU.readyState;var cY=cU.status;if(cL==4&&cY==200){var cK=cU.responseXML;if(cK){var cR;if(cK.documentElement){cR=cK.documentElement}else{cR=cK}if(cR){var cS=document.getElementsByTagName("script");var cZ=0;var cT=false;var cO="";var cW="";if(typeof(akamaiBCVideoObject)!="undefined"){if(bl){cT=true;cW=bl}}else{if(cS.length){for(cZ=0;cZ<cS.length;cZ++){if((cS[cZ].src!=null)){if((cS[cZ].src.indexOf("79423.analytics.edgesuite.net/html5/akamaihtml5-min.js")!=-1)||(cS[cZ].src.indexOf("79423.analytics.edgekey.net/html5/akamaihtml5-min.js")!=-1)){cT=true;cW=cS[cZ].src}}}}}var cM="";if(typeof(akamaiBCVideoObject)!="undefined"){cM=cR.getElementsByTagName("brightcove")[0]}else{cM=cR.getElementsByTagName("plugin")[0]}if(cM){var c2=cM.getAttribute("name");var cN=cM.getAttribute("version");var cQ=cM.getAttribute("link");var cV=cM.getAttribute("size");var cP=cM.getAttribute("date");var cX="";bn("Integration Type : "+c2,"INTEGRATION");if(cT){bn("Plugin path is correct ["+cW+"]","INTEGRATION")}else{cX="Incorrect Plugin Path";cX+="<ul style='list-style-type:circle;margin:0'>";cX+="<li>Kindly refer the Integration Guide and use the correct plugin path for integration</li>";cX+="<li>The plugin path should be one of the below :</li>";if(typeof(akamaiBCVideoObject)!="undefined"){cX+="<ul><li>http://79423.analytics.edgesuite.net/html5/brightcoveAkamaihtml5-min.js</li>";cX+="<li>https://79423.analytics.edgekey.net/html5/brightcoveAkamaihtml5-min.js</li></ul>"}else{cX+="<ul><li>http://79423.analytics.edgesuite.net/html5/akamaihtml5-min.js</li>";cX+="<li>https://79423.analytics.edgekey.net/html5/akamaihtml5-min.js</li></ul>"}cX+="</ul>";bn(cX,"ERROR")}var c1=bP(bw,cN);if(c1>=0){bn("Plugin is Latest (Version = "+bw+" )","INTEGRATION")}else{cX="Old Plugin Version";cX+="<ul style='list-style-type:circle;margin:0'>";cX+="<li>Current Plugin Version is "+bw+"</li>";cX+="<li>The latest plugin version in "+cN+" which was released on date "+cP+"</li>";cX+="<li>Kindly check if proper path mentioned in integration guide is used for integration</li>";cX+="<li>If proper path is used, try by clearing browser cache.</li>";bn(cX,"ERROR")}}}}}}catch(c0){}}function bP(cK,cQ){try{var cN=0;if(cK!=null&&cQ!=null){var cO=cK.split(".");var cL=cQ.split(".");while(cO.length>cL.length){cL.push(0)}while(cL.length>cO.length){cO.push(0)}for(var cM=0;cM<cO.length;cM++){if(parseInt(cO[cM])>parseInt(cL[cM])){cN=1;break}if(parseInt(cO[cM])<parseInt(cL[cM])){cN=-1;break}}}}catch(cP){}return cN}function b5(cM,cK,e){var cL;if(S){cL=new XDomainRequest();cL.onload=function(){bn("XML Request : xmlClient.onload");cM("4","200",cL.responseText)};cL.onerror=function(cN){bn("Error, ais request")};cL.open("GET",cK,e);cL.send(null)}else{cL=new XMLHttpRequest();cL.responseType="json";cL.open("GET",cK,e);if(cL.overrideMimeType){cL.overrideMimeType("application/json")}cL.onreadystatechange=function(){cM(cL.readyState,cL.status,cL.responseText)};cL.send(null)}}function cu(cL,e,cK){if(aI){}else{aJ(cL,e,cK)}}function aJ(cN,cK,cM){if(cN){bn("XML Request: isXDomainRequest = "+S+":::funcCallback =  :url: "+cK)}var cL;if(cK==null||cK=="undefined"||cK==""){return}try{if(S){cL=new XDomainRequest();if(cN){cL.onload=function(){bn("XML Request : xmlClient.onload");if(window.DOMParser){var cQ=new DOMParser();var cP=cQ.parseFromString(cL.responseText,"text/xml");var e={};e.status="200";e.readyState="4";e.responseXML=cP;e.responseText=cL.responseText;cN(e)}else{var cP=new ActiveXObject("Microsoft.XMLDOM");cP.async=false;cP.loadXML(cL.responseText);var e={};e.status="200";e.readyState="4";e.responseXML=cP;cN(e)}};cL.onerror=function(cP){bn("XML Request : Error, loading xml. url = :"+cK);if(cK.indexOf("serverIp")!=-1){X=true}if(cK.indexOf("protocol-info")!=-1){c.fastTCPFailed=true}}}cL.open("GET",cK,!cM);cL.send(null)}else{cL=new XMLHttpRequest();cL.open("GET",cK,!cM);if(cN){if(cL.overrideMimeType){cL.overrideMimeType("text/xml")}cL.onreadystatechange=function(){bn("XML Request : xmlClient.onreadystatechange");cN(cL)}}cL.send(null)}}catch(cO){bn("Exception,  XML Request for url :"+cK+",Exception:"+cO)}}function al(cY){var cN=cY.readyState;var c4=cY.status;bn("readConfig: readyState = "+cN+":::status = "+c4);try{if(cN==4&&c4==200){var cL=cY.responseXML;if(cL){var cT;if(cL.documentElement){cT=cL.documentElement}else{cT=cL}var c8=cT.getElementsByTagName("dataMetrics");for(var c1=0;c1<c8.length;++c1){var c2=c8[c1];var cW=c2.parentNode;var cM=cW.nodeName;bd[c1]=cM;var c3=bi[cM]=[];var cP=cW.getAttribute("eventCode");if(cP){ad[cM]=cP}var cU=c2.getElementsByTagName("data");for(var c9=0;c9<cU.length;++c9){var cQ=cU[c9];cM=cQ.getAttribute("name");var cO=cQ.getAttribute("key");cP=cQ.getAttribute("value");var cS=cQ.getAttribute("sendOnce");var c7=cQ.getAttribute("fallback");var cK=cQ.getAttribute("size");var c0=cQ.getAttribute("regExp");var c6={};c6.name=cM;c6.key=cO;if(cM in b4){b4[cM]=true}else{if(cO.indexOf("_cd_")!=-1){b4[cM]=true}}if(cP){c6.value=cP}if(cS){c6.isSent=false;c6.sendOnce=cS}if(c7){c6.fallback=c7}if(cK){c6.size=cK}if(c0){c6.regExp=c0}c3.push(c6)}}H.configDebug=parseInt(cT.getAttribute("debug"));if(H.configDebug!=1){H.configDebug=0}if(H.configDebug==1){aK()}if(cT.getElementsByTagName("isActive")[0]&&cT.getElementsByTagName("isActive")[0].childNodes[0]){bJ=cT.getElementsByTagName("isActive")[0].childNodes[0].nodeValue}aL.beaconId=cT.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue;aL.beaconVersion=cT.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var da=cT.getElementsByTagName("logTo")[0];l.logType=da.getAttribute("logType");if(!l.logType){l.logType="relative"}l.logInterval=da.getAttribute("logInterval")*1000;if(!l.logInterval){l.loginterval=300*1000}l.heartBeatInterval=da.getAttribute("heartBeatInterval")*1000;if(!l.heartBeatInterval){l.heartBeatInterval=60*1000}l.secondaryLogTime=da.getAttribute("secondaryLogTime")*1000;if(!l.secondaryLogTime){l.secondaryLogTime=15*1000}l.isSessionWithRebufferLimit=da.getAttribute("isSessionWithRebufferLimit");if(!l.isSessionWithRebufferLimit){l.isSessionWithRebufferLimit=500}l.fastTCPEnabled=da.getAttribute("fastTCPEnabled");if(!l.fastTCPEnabled){l.fastTCPEnabled=0}if(l.fastTCPEnabled==1){c.fastTCPEnabled=true}l.aisRequestLimit=da.getAttribute("aisRequestLimit");if(!l.aisRequestLimit){l.aisRequestLimit=3}if(bI){bI.aisRequestLimit=l.aisRequestLimit}l.aisRequestInterval=da.getAttribute("aisRequestInterval")*1000;if(!l.aisRequestInterval){l.aisRequestInterval=30*1000}if(bI){bI.aisRequestInterval=l.aisRequestInterval}l.startupTimeOutlierLimit=da.getAttribute("startupTimeOutlierLimit")*1000;if(!l.startupTimeOutlierLimit){l.startupTimeOutlierLimit=600*1000}l.visitTimeout=da.getAttribute("visitTimeout")*60*1000;if(!l.visitTimeout){l.visitTimeout=60*60*1000}l.urlParamSeparator=da.getAttribute("urlParamSeparator");if(!l.urlParamSeparator){l.urlParamSeparator="~"}l.encodedParamSeparator=da.getAttribute("encodedParamSeparator");if(!l.encodedParamSeparator){l.encodedParamSeparator="*@*"}l.initBrowserCloseTime=da.getAttribute("initBrowserCloseTime");if(!l.initBrowserCloseTime){l.initBrowserCloseTime=15*60*1000}l.beaconUrl=da.getElementsByTagName("host")[0].childNodes[0].nodeValue;if((l.beaconUrl.indexOf("http://")==-1)&&(l.beaconUrl.indexOf("https://")==-1)){l.beaconUrl="http://"+l.beaconUrl}l.beaconUrl+=da.getElementsByTagName("path")[0].childNodes[0].nodeValue;l.maxLogLineLength=da.getAttribute("maxLogLineLength");if(!l.maxLogLineLength){l.maxLogLineLength=2048}l.maxLogLineLength-=l.beaconUrl.length;l.logVersion=da.getElementsByTagName("logVersion")[0].childNodes[0].nodeValue;l.formatVersion="1.1";if(da.getElementsByTagName("formatVersion")&&da.getElementsByTagName("formatVersion")[0]&&da.getElementsByTagName("formatVersion")[0].childNodes[0]){l.formatVersion=da.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue}l.useKey=parseInt(cT.getElementsByTagName("statistics")[0].getAttribute("useKey"));var c5=cT.getElementsByTagName("feedback")[0];if(c5!=null&&c5!==""){ba.shouldSendFLine=true;ba.limit=c5.getAttribute("limit");if(!ba.limit){ba.limit=3}ba.socialShareLimit=c5.getAttribute("socialShareLimit");if(!ba.socialShareLimit){ba.socialShareLimit=1}}var cR=cT.getElementsByTagName("security")[0];if(cR!=null&&cR!==""){var de=cR.getElementsByTagName("ViewerDiagnostics")[0];if(de!=null&&de!==""){aD.viewerDiagnostics={};var cV=de.getElementsByTagName("salt")[0];if(cV!=null&&cV!==""){aD.viewerDiagnostics.salt={};var cX=cV.getAttribute("value");var dc=cV.getAttribute("version");if(cX!=null&&cX!==""){aD.viewerDiagnostics.salt.value=cX;aD.viewerDiagnosticsEnabled=true;if(dc!=null&&dc!==""){aD.viewerDiagnostics.salt.version=dc}aD.viewerDiagnostics.salt.bytes=cV.getAttribute("bytes")*2;if(!aD.viewerDiagnostics.salt.bytes){aD.viewerDiagnostics.salt.bytes=16*2}aD.viewerDiagnostics.salt.iterations=cV.getAttribute("iterations");if(!aD.viewerDiagnostics.salt.iterations){aD.viewerDiagnostics.salt.iterations=50}}else{aD.viewerDiagnosticsEnabled=false}}}}var cZ=cT.getElementsByTagName("bucketInfo")[0];b3.bucketLength=cZ.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue;b3.bucketCount=cZ.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue;cc=true;m();a8();bt();var dd=cT.getElementsByTagName("match");for(var c9=0;c9<dd.length;c9++){match=dd[c9];try{parentKey=match.parentNode.parentNode.getAttribute("name");if(!bC[parentKey]){bC[parentKey]={}}bC[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(db){bn(db)}}aW();I();aH()}}}catch(db){bn("Exception,  readConfig :"+db)}}function m(){try{var cK=bi.split;for(var cL=0;cL<cK.length;cL++){br[cK[cL].name]=cK[cL].key}}catch(cM){}}function aW(){var cN={};try{if(!bC.bitRateBucketTimes){bC.bitRateBucketTimes={};cN=bC.bitRateBucketTimes;cN.U={key:"U",type:"range"};cN.S={key:"S",max:1500,value:"max:1500",type:"range"};cN.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"};cN.D={key:"D",min:2500,value:"min:2500",type:"range"}}else{var cP,cM,cL;for(cL in bC.bitRateBucketTimes){cN=bC.bitRateBucketTimes[cL];if(cN){cN.key=cL;if(!cN.value){cN.category="first"}else{cP=cN.value;cM=cP.split(";");for(var cK=0;cK<cM.length;cK++){if(cM[cK].indexOf("min:")!=-1){cN.min=parseInt(cM[cK].split(":")[1])}else{if(cM[cK].indexOf("max:")!=-1){cN.max=parseInt(cM[cK].split(":")[1])}}}}}}}bQ.bitRateBucketMap={};for(var cO in bC.bitRateBucketTimes){bQ.bitRateBucketMap[cO]=0}}catch(cQ){bn("Exception, find bit rate match rules :"+cQ)}}function I(){bn("fillVideoWithConfig function");if(ax&&ax.akamai){var e=ax.akamai;e.populateMetricsFromConfiguration();if(e.isSLineSent){t(ax)}if(aD.viewerDiagnosticsEnabled){bD(e)}e.cdn=aC(e)}}function aH(){bn("sendStoredBeacons: number of beacons to be sent = "+cq.length);try{var cL=ax.akamai;while(cq.length>0){var cK=cq.shift();bn("readConfig: sending beacon event code = "+cK.code);cK.element.populateMetricsFromConfiguration();cK.element.xViewerId=bT.xViewerId;cK.element.xViewerIdVersion=bT.xViewerIdVersion;cK.element.cdn=aC(cK.element);bB(cK.element,cK.code,cK.synch)}}catch(cM){bn("Exception,  sendStoredBeacons"+cM)}}cu(al,au.url,false);function aC(cM){if(a0.cdn){return a0.cdn}else{try{for(key in bC.cdn){var cP=bC.cdn[key];if(cP&&cP.name&&cP.value){var cO=cM[cP.name];var cK=cP.value.split(",");for(var cL=0;cL<cK.length;cL++){if(cO&&(cO.indexOf(cK[cL].trim())!=-1)){return key;break}}}}}catch(cN){bn("Exception Get CDN"+cN.message)}}}function aq(cL){var cK="";var e;if(cL.indexOf("://")!=-1){e=cL.indexOf("://");cL=cL.substring(e+3)}if(cL.indexOf("/")!=-1){e=cL.indexOf("/");if(cL.indexOf("?")!=-1){var cM=cL.indexOf("?");e=(e<cM)?e:cM}cK=cL.substring(0,e)}else{if(cL.indexOf("?")!=-1){var e=cL.indexOf("?");cK=cL.substring(0,e)}else{cK=cL}}return cK}function ao(cO,cN,e,cM){var cL=cO.currentState;var cK=cO.seekObject;if(cM=="S"&&cK.seekStartStreamTime==-1){cK.seekStartEpochTime=cN;cK.seekEndEpochTime=cN;cK.seekStartStreamTime=cL.timeUpdateStreamTime;cK.seekEndStreamTime=e}else{if(cM=="S"&&cK.seekEndStreamTime==cL.timeUpdateStreamTime){cK.seekEndEpochTime=cN;cK.seekEndStreamTime=e}else{if(cK.seekStartStreamTime!=-1){cO.seekTime+=cK.seekEndEpochTime-cK.seekStartEpochTime;if(cO.seekIntervalsAsString!="-"){cO.seekIntervalsAsString+=","+cK.seekStartStreamTime+":"+cK.seekEndStreamTime}else{cO.seekIntervalsAsString=cK.seekStartStreamTime+":"+cK.seekEndStreamTime}if(cO.pauseSeekSession!="-"){cO.pauseSeekSession+=",S("+cK.seekStartStreamTime+":"+(cK.seekStartEpochTime-cO.startTimer)+"-"+cK.seekEndStreamTime+":"+(cK.seekEndEpochTime-cO.startTimer)+")"}else{cO.pauseSeekSession="S("+cK.seekStartStreamTime+":"+(cK.seekStartEpochTime-cO.startTimer)+"-"+cK.seekEndStreamTime+":"+(cK.seekEndEpochTime-cO.startTimer)+")"}++cO.seekCount;cO.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1}}}}}function O(cL,cK){bn("set RebufferSession : curTime = "+cK);try{var cN=Math.round(cK-cL.lastLogTime-cL.curRebufferTime);var cO=Math.round(cL.curRebufferTime);cL.currRebufferEndEpoch=Math.round(cK);cL.currRebufferStartEpoch=Math.round(cK-cO);if(cO>l.isSessionWithRebufferLimit){cL.isSessionWithRebuffer=1}if(cL.rebufferSession){cL.rebufferSession=cL.rebufferSession+";"+cN+":"+cO}else{cL.rebufferSession=cN+":"+cO}}catch(cM){bn("Error, set RebufferSession"+cM.message)}}function cd(cQ,cK){var cN;var cP;if(cK=="B"){var cL="";if(cQ.rebufferSession){var e=cQ.rebufferSession.split(";");for(var cM=0;cM<e.length;cM++){var cO=e[cM].split(":");if(cM==0){cL+="0:"+cO[1]}else{cL+=e[cM]}if(cM!=e.length-1){cL+=";"}}bn("newRebufferSession = "+cL);cQ.rebufferSession=cL}cP=1;cN=0}else{cP=0;if(cQ.lastRebufferEndEpoch>0){cN=cQ.firstRebufferStartEpoch-cQ.lastRebufferEndEpoch}else{cN=-1}}cQ.rebufferSession=cP+":"+cN+";"+cQ.rebufferSession;cQ.lastRebufferEndEpoch=cQ.currRebufferEndEpoch}function b0(cN,cM){var cK=1;cN.rebufferSessionH=null;if(!cN.rebufferSessionArrayHLine||((cN.rebufferSessionArrayHLine)&&(cN.rebufferSessionArrayHLine.length===0))){return}while(cN.rebufferSessionArrayHLine[cK]&&((cM-cN.rebufferSessionArrayHLine[cK])>(2*l.heartBeatInterval))){cN.rebufferSessionArrayHLine.shift();cN.rebufferSessionArrayHLine.shift();if(cN.isSessionWithRebufferH==1){cN.sendIsSessionWithRebufferH=0;cN.isSessionWithRebufferH=null}}while(cN.rebufferSessionArrayHLine[cK]){var e=cM-cN.rebufferSessionArrayHLine[cK-1];var cL=cN.rebufferSessionArrayHLine[cK]-cN.rebufferSessionArrayHLine[cK-1];if(cN.sendIsSessionWithRebufferH==1){if(cL>l.isSessionWithRebufferLimit){cN.isSessionWithRebufferH=1}}if(cN.rebufferSessionH){cN.rebufferSessionH=cN.rebufferSessionH+";"+e+":"+cL}else{cN.rebufferSessionH=e+":"+cL}cK=cK+2}cK=cK-1;if(cN.rebufferSessionArrayHLine[cK]){var e=cM-cN.rebufferSessionArrayHLine[cK];if(cN.sendIsSessionWithRebufferH==1){if(e>l.isSessionWithRebufferLimit){cN.isSessionWithRebufferH=1}}if(cN.rebufferSessionH){cN.rebufferSessionH=cN.rebufferSessionH+";"+e+":"+e}else{cN.rebufferSessionH=e+":"+e}}}function ca(e){if(a0.deliveryType){return a0.deliveryType}else{return e.deliveryType}}function bN(cL){var e=cL.readyState;var cK=cL.status;if(parseInt(cK/100)===4||cK===0){bn("readServerIp: serverIpFailed request falied as status is ,in 400 series");X=true}if(e==4&&cK==200){var cN=cL.responseXML;if(cN){var cM;if(cN.documentElement){cM=cN.documentElement}else{cM=cN}b9.serverip=cM.getElementsByTagName("serverip")[0].childNodes[0].nodeValue;bn("readServerIp : diagnostics.serverip =  "+b9.serverip)}}}function ac(e){var cM=e.akamai;if(X){bn("getting ServerIp : serverIp request failed");return}if(cM.hostName){try{var cL=cM.protocol+"://"+cM.hostName+"/serverIp";bn("getting ServerIp : serverIpPath = "+cL);cu(bN,cL,false)}catch(cK){X=true;bn("getting ServerIp: error, xmphttprequest")}}}function ab(cL){var cK="";var cN=cL.readyState;var cM=cL.status;if(parseInt(cM/100)===4||cM===0){bn("read fast tcp: fast tcp Failed request falied as status is 400 series");c.fastTCPFailed=true}try{if(cN==4&&cM==200){var cR=cL.responseXML;if(cR){bn("populating fast tcp");var cS;if(cR.documentElement){cS=cR.documentElement}else{cS=cR}if(cS&&cS.firstElementChild){var e=cS.firstElementChild;var cO="";var cQ="";if(e){if(e.hasAttribute("key")){cQ=e.getAttribute("key");cO=e.childNodes[0].nodeValue;cK=cQ+":"+cO}while(e.nextElementSibling){e=e.nextElementSibling;if(e.hasAttribute("key")){cQ=e.getAttribute("key");cO=e.childNodes[0].nodeValue;if(cK){cK+=","+cQ+":"+cO}else{cK=cQ+":"+cO}}}}}}}if(cK){c.ftcp=cK}}catch(cP){bn("Exception,  read fast tcp"+cP)}}function b2(e){var cM=e.akamai;if(c.fastTCPFailed){bn("getting fast tcp: request failed");return}if(cM.hostName){try{var cL=cM.protocol+"://"+cM.hostName+"/protocol-info";bn("getting fast tcp : fastTCPPath = "+cL);cu(ab,cL,false)}catch(cK){c.fastTCPFailed=true;bn("getting ServerIp: error, xmphttprequest")}}}function aG(cK,cN){try{var cL=cK.akamai;if(l&&l.logInterval&&!cN){cL.fastTCPServerIpTimer=bx(aG,l.logInterval,[cK])}if(!X){ac(cK)}if(!c.fastTCPFailed&&c.fastTCPEnabled){b2(cK)}if(X&&c.fastTCPFailed){bA(cL.fastTCPServerIpTimer)}}catch(cM){bn("Exception get fast tcp server ip")}}function a2(e){var cK=null;if(e.objectBased){if(e.errorReason){cK=e.errorReason}else{cK=bS[0]}}else{if(e.error&&e.error.code){cK=bS[e.error.code]}else{cK=bS[0]}}return cK}function aa(cK){var e="Play.End.Detected";if(cK.objectBased){if(cK.endReason){e=cK.endReason}}return e}function v(){bT.viewerId=a0.viewerId?a0.viewerId:null;bT.viewerDiagnosticsId=a0.viewerDiagnosticsId?a0.viewerDiagnosticsId:(a0.viewerId?a0.viewerId:null)}function d(cK){var e=cI();return e}function aS(cL){var cN=bT.viewerId;if(cN=="-"){return}if(!cN){try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId")){cN=window.localStorage.getItem("akamai_clientId")}else{if(y("HTML_ViewerId")){cN=y("HTML_ViewerId")}else{try{cN=cI();if(window&&window.localStorage){window.localStorage.setItem("akamai_clientId",cN)}try{a5("HTML_ViewerId",cN)}catch(cM){}}catch(cK){bn("window.localStorage Exception :"+cK)}}}}catch(cM){bn("Exception,  getting viewerId"+cM);cN=cI()}}return cN}function bD(cP,cM){var cO=null;if(bT&&bT.viewerDiagnosticsId){cO=bT.viewerDiagnosticsId}var cK="";var cN=50;var e=16*2;if(!cO||cO=="-"){return}if(cM&&cP.xViewerId){return}aQ(cP);bn("get Viewer DiagnosticsID");cO=encodeURIComponent(cO);if(aD&&aD.viewerDiagnostics&&aD.viewerDiagnostics.salt&&aD.viewerDiagnostics.salt.value){cK=aD.viewerDiagnostics.salt.value}if(aD&&aD.viewerDiagnostics&&aD.viewerDiagnostics.salt&&aD.viewerDiagnostics.salt.iterations){cN=aD.viewerDiagnostics.salt.iterations}if(aD&&aD.viewerDiagnostics&&aD.viewerDiagnostics.salt&&aD.viewerDiagnostics.salt.bytes){e=aD.viewerDiagnostics.salt.bytes}var cL=bh.PBKDF2(cO,cK,{keySize:e/8,iterations:cN});cP.xViewerId=cL;bT.xViewerId=cL}function aQ(cK){var e=null;if(aD&&aD.viewerDiagnostics&&aD.viewerDiagnostics.salt&&aD.viewerDiagnostics.salt.version){e=aD.viewerDiagnostics.salt.version}cK.xViewerIdVersion=e;bT.xViewerIdVersion=e}function cs(cL,cM,cK){var e;if(cM=="viewerId"||cM=="clientId"||cM=="viewerDiagnosticsId"){return}if(cK){if(a0[cK]){e=a0[cK]}else{if(cL[cK]){e=cL[cK]}}}cL[cM]=e}this.getValueFromQueryString=function(){return E(key,searchURL)};function E(cL,cP,cN){if(cN==null){cN=""}try{if(cP==""||cP==null){return}cL=cL.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var cM=new RegExp("[\\?&]"+cL+"=([^&#]*)");var cK=cM.exec(cP);if(cK==null){return cN}else{return cK[1]}}catch(cO){bn("Exception,  getValueFromQueryString :"+cO);return cN}}function bu(e){var cK=e.akamai;bA(cK.fastTCPServerIpTimer);aG(e)}function bx(cM,cO,cL){try{var cK=null;cK=setTimeout(function(){cM.apply(undefined,cL)},cO);return cK}catch(cN){bn("Exception, set window timeout:"+cN);try{cK=window.setTimeout(function(){cM.apply(undefined,cL)},cO)}catch(cN){return null}return cK}}function bA(cK){try{clearTimeout(cK)}catch(cL){bn("Exception clear window timeout:"+cL);try{window.clearTimeout(cK)}catch(cL){}}}function t(e){bn("startBeaconTImer");var cK=e.akamai;if(cK.areTimerStarted){return}bn("startBeaconTimer: starting beacon timer");cK.firstPLineTimer=bx(cD,l.secondaryLogTime,[e]);cK.hLineTimer=bx(cy,l.heartBeatInterval,[e]);cK.fastTCPServerIpTimer=bx(bu,(l.logInterval-5000),[e]);if(e.objectBased){F=500}cK.pollingTimer=bx(cj,F,[e]);cK.areTimerStarted=true}function bj(e){var cK=e.akamai;if(cK){if(cK.hLineTimer){bA(cK.hLineTimer)}if(cK.pollingTimer){bA(cK.pollingTimer)}if(cK.fastTCPServerIpTimer){bA(cK.fastTCPServerIpTimer)}if(cK.firstPLineTimer){bA(cK.firstPLineTimer)}if(bI&&bI.retryTimer){bA(bI.retryTimer)}}}function cB(cK){var cN=cK.akamai;ba.akamai={};ba.dataSent={};cN.areTimerStarted=false;cN.isCLineSent=false;cN.isELineSent=false;cN.lastRebufferEndEpoch=0;cN.connectTime=0;cN.totalPlayClockTime=cN.totalStreamTime=cN.totalRebufferCount=cN.totalRebufferTime=0;cN.isVisitEnd=0;cN.sequenceId="0";ay(cK);cN.attemptId=cN.sessionId=d(cN);v();cN.clientId=cN.viewerId=aS(cN);if(aD.viewerDiagnosticsEnabled){bD(cN)}else{}cN.lastPLineSentTime=cN.hLineSentCount=cN.lastSLineSentTime=cN.lastHLineSentTime=0;cN.lastHTime=0;Q("HTML_LastCLineTime");bp=[0,0,0,0,0,0,0,0,0,0,0,0];var cO=parseInt(y("HTML_VisitCountCookie"));if(!cO||cO==""){cN.isVisitStart=1;cO=0;a5("HTML_VisitCountCookie",cO)}var cP=parseInt(y("HTML_isPlayingCount"));if(!cP||cP==""){cP=0;a5("HTML_isPlayingCount",cP)}var e=y("HTML_VisitValueCookie");if(!e||e==""){a5("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0")}var cM=y("HTML_BitRateBucketCsv");if(!cM||cM==""){a5("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0")}var cL=y(bW);if(!cL||cL==""){cN.browserSessionId=cN.visitId=cI();a5(bW,cN.visitId)}else{cN.browserSessionId=cN.visitId=y(bW)}}function A(e){var cL=e.akamai;cL.isILineSent=true;++cL.iLineCount;cL.lastSLineSentTime=bE();if(cL.iLineCount==1){var cM=parseInt(y("HTML_VisitCountCookie"));++cM;a5("HTML_VisitCountCookie",cM);f=bE()}var cK=parseInt(y("HTML_VisitIntervalStartTime"));if(!cK||cK==" "){cK=bE();a5("HTML_VisitIntervalStartTime",cK)}bp[0]=1;cL.sendVLine=true}function aj(cO){try{var cN=ax.akamai;if(cN.clearVisitTimeoutId){bA(cN.clearVisitTimeoutId)}cB(ax);var cM=bE();cN.logInterval="0";if(!cc){var cL=co(cN);var cK={element:cL,code:"init",synch:cO};cq.push(cK)}else{bB(cN,"init",cO)}cN.lastLogTime=cM;++cN.sequenceId;A(ax);cN.currentState.state=cb.init;bn(bE()+": sendBeaconILineAd : Setting state to init");cN.currentState.timeUpdateClockTime=cM;cN.startTimer=cM}catch(cP){bn("Exception, send I line AD:"+cP)}}function cD(e){var cK=e.akamai;cK.lastPLineSentTime=bE();q(e,"playing",false)}function r(cQ,cS,cN,cM){try{bn("start of the session function");var cO=cQ.akamai;if(!cO||!cO.firstTimePlay){return}var cN=bE();if(cO.adLoadTime&&cO.adLoadTime>cO.iLineSentTime){cO.startupTime=cO.adLoadTime-cO.iLineSentTime;if(cO.adEndTime){cO.startupTime+=cN-cO.adEndTime}}else{cO.startupTime=cN-cO.iLineSentTime}if(cO.startupTime>l.startupTimeOutlierLimit){cO.outlierStartupTime=cO.startupTime;cO.startupTime=0}cO.bufferingTime=cO.startupTime;var cR={type:"startup",startTime:0,endTime:cO.startupTime};ay(cQ);var cL=w(cQ);bL(cL,cO);cO.streamUrl=cL;if(cL!=null&&cL.indexOf("?")!=-1){cL=cL.substring(0,cL.indexOf("?"))}if(cL!=null&&cL!=""){if(/.m3u8$/.exec(cL)){cO.format="L";cO.playerFormat=cO.playerType+":"+cO.format}else{cO.format="P";cO.playerFormat=cO.playerType+":"+cO.format;cO.deliveryType="O"}}cO.streamLength=parseInt(B(cQ));cO.played=[];var cK=parseInt(y("HTML_isPlayingCount"));cK=cK+1;a5("HTML_isPlayingCount",cK);v();if(aD.viewerDiagnosticsEnabled){bD(cO,true)}cO.lastSLineSentTime=bE();q(cQ,"playStart",false);cO.rebufferSessionArrayHLine=[];cO.isSLineSent=true;if(cc){t(cQ)}bp[1]=1;cO.isFirstTitle=null;cO.isVisitStart=null;cO.firstTimePlay=false;cO.initPlayed(cM)}catch(cP){bn("Exception, send S line:"+cP)}}function cw(cK,cN){try{bn("send beacon I line");var cM=cK.akamai;var cL=bE();cM.cdn=aC(cM);aG(cK,true);if(!cM.iLineSentTime){cM.iLineSentTime=cL}if(cK.videoWidth&&cK.videoHeight){cM.videoSize=cK.videoWidth+"x"+cK.videoHeight}if(!cM.isILineSent){cB(cK);q(cK,"init",cN);A(cK);if(cM.clearVisitTimeoutId){bA(cM.clearVisitTimeoutId)}}}catch(cO){bn("Exception send I line:"+cO)}}function cy(e){var cK=e.akamai;cK.hLineTimer=bx(cy,l.heartBeatInterval,[e]);q(e,"heartBeat",false);cK.lastHLineSentTime=bE();cK.hLineSentCount++;if((cK.hLineSentCount%(l.logInterval/l.heartBeatInterval))==0){q(e,"playing",false);cK.lastPLineSentTime=bE()}}function bm(cK,cN,cM){try{bn("sendBeaconCLine : endReasonCode = "+cN);var cL=cK.akamai;cL.endReasonCode=cN;q(cK,"complete",cM);var cQ=parseInt(y("HTML_isPlayingCount"));cQ=cQ-1;a5("HTML_isPlayingCount",cQ);cL.isVisitStart=null;cL.isCLineSent=true;cL.firstTimePlay=true;bj(cK);var cP=bE();a5("HTML_LastCLineTime",cP)}catch(cO){bn("Exception, send beacon C Line:"+cO)}}function g(cK,cP,cM){try{var cL=cK.akamai;if(cP){cL.errorCode=cP}else{cL.errorCode="UNKNOWN"}bn("sendBeaconELine : errorCode = "+cL.errorCode);bp[3]=1;if(cL.sequenceId==1){bp[11]=1;v();if(aD.viewerDiagnosticsEnabled){bD(cL,true)}}cL.playerState="E";q(cK,"error",cM);if(cL.isSLineSent){var cQ=parseInt(y("HTML_isPlayingCount"));cQ=cQ-1;a5("HTML_isPlayingCount",cQ)}cL.isELineSent=true;cL.isVisitStart=null;cL.firstTimePlay=true;bj(cK);var cO=bE();bY(cL);a5("HTML_LastCLineTime",cO)}catch(cN){bn("Exception, send beacon E line:"+cN)}}function ag(cK){try{bn("sendBeaconVLine");var cO=cK.akamai;cO.isVisitEnd=1;n(cO);var cL=parseInt(y("HTML_VisitIntervalStartTime"));var cN=bE();cO.visitMaxPersistentBitRateBucket=bR();cO.visitInterval=cN-cL;if(cL==""||cL==null||isNaN(cL)){cO.visitInterval=cN-f}cO.sessionId=null;cO.attemptId=null;cO.sequenceId=null;Q("HTML_BitRateBucketCsv");Q("HTML_VisitValueCookie");Q("HTML_VisitIntervalStartTime");Q("HTML_LastCLineTime");Q("HTML_VisitCountCookie");Q("HTML_isPlayingCount");Q(bW);q(cK,"visit",true);ba.akamai={};ba.dataSent={};bn("sendBeaconVLine: beacon sent");cO.sendVLine=false;cO.iLineCount=0;bA(cK.akamai.clearVisitTimeoutId);var cM=cO.isPlaylist;cK.akamai=new aU(ax);if(typeof(akamaiBCVideoObject)!="undefined"){cK.akamai.isPlaylist=cM}}catch(cP){bn("Exception, send beacon V line:"+cP)}}function W(){var e=y("HTML_VisitValueCookie");var cN=e.split("|");var cO;for(var cL=0;cL<bp.length;cL++){z[cL]+=bp[cL]}bn("setVisitValueCookie :: visit values saved"+z);for(var cM=0;cM<cN.length;cM++){cN[cM]=parseInt(cN[cM])+bp[cM]}var cK=cN.join("|");a5("HTML_VisitValueCookie",cK)}function aZ(){try{var cN=y("HTML_BitRateBucketCsv");var cO=ar.split(",");var cK=cN.split(",");var cL=0;for(var cM in bQ.bitRatePlayTime){cM=parseInt(cM);cL=parseInt((cM-1)/500000);if(cL>7){cL=7}cK[cL]=parseInt(cK[cL])+bQ.bitRatePlayTime[cM];cO[cL]=parseInt(cO[cL])+bQ.bitRatePlayTime[cM]}cN=cK.join(",");a5("HTML_BitRateBucketCsv",cN);ar=cO.join(",")}catch(cP){bn("Exception set bit rate bucketcsv"+cP)}}function bX(e){bn("entered setVisitValueParameters");bp[4]=e.totalPlayClockTime;bp[5]=e.totalPlayStreamTime;bp[6]=e.totalRebufferCount;bp[7]=e.totalRebufferTime;bp[8]=e.totalAdPlayClockTime;bp[9]=e.totalAdStartCount;bp[10]=e.totalAdAbandonCount;if(e.totalPlayClockTime>5000){bp[2]=1}aZ();W()}function n(cM){try{var cR=y("HTML_VisitValueCookie");var cK=cR.split("|");var cO=true;if(cK==""||cK==null){cO=false}var cS;var cQ=[];if(cO){cQ=cK}else{cQ=z}var cP=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"];for(var cL=0;cL<cP.length;cL++){cM[cP[cL]]=cQ[cL]}}catch(cN){bn("Exception get visit value  cookie : "+cN)}}function bR(){try{var cO=y("HTML_BitRateBucketCsv");var cL=cO.split(",");var cK=false;if(cL==null||cL==""){cL=ar.split(",")}cL[0]=parseInt(cL[0]);var cQ="00",cM=cL[0];for(var cN=0;cN<cL.length;cN++){cL[cN]=parseInt(cL[cN]);if(cL[cN]>0){cK=true}if(cM<cL[cN]){cM=cL[cN];cQ="0"+cN}}if(cK){return cQ}}catch(cP){bn("Exception, get visit max bit rate bucket"+cP)}}function a6(cM){try{var cK=encodeURI(cM);cK=cK.replace(/#/g,"%23");return cK}catch(cL){bn("Exception,  encoding beacon");return cM}}function at(cN,cM,cL){if(bJ==0){bn("put beacon On Wire, dont send beacon isACtive is zero");return}var e=l.beaconUrl+"?"+cN;bn(e,"BEACON");try{cu(null,e,cM)}catch(cK){bn("failed to send beacon");bn(cK)}}function cn(cK,cL){try{cK=cK.substring(0,cL);return cK}catch(cM){bn("Exception,  getTruncatedMetric"+cM);return cK}}function cE(cQ,cO,cK,cP){try{var cM;for(var cN=0;cN<cO.length;cN++){cM=cO[cN].name;var cL=null;if(cM in cQ){cL=cQ[cM]}if(cO[cN].value){cL=cO[cN].value}if(cL||cL==0){if(cO[cN].sendOnce){if(cO[cN].isSent===false){if(cL!=0){cO[cN].isSent=true}h(cL,cO,cM,cN,cP,cK)}}else{h(cL,cO,cM,cN,cP,cK)}}}}catch(cR){bn("Exception, assemble logs:"+cR)}}function h(cQ,cR,cL,cN,cK,cO){try{if(cR[cN].regExp){var cS=new RegExp(cR[cN].regExp);var cM=cS.exec(cQ);if(cM){cQ=cM[1]}}}catch(cP){bn("Exception,  evaluating regExp attribute for metric : "+cL)}cQ=String(cQ).replace(/~/g,l.encodedParamSeparator);if(cR[cN].size){cQ=cn(cQ,cR[cN].size)}if(cR[cN].key in cK){}else{cK[cR[cN].key]=cR[cN].key;cO.push((l.useKey?cR[cN].key:cL)+"="+cQ)}}function bB(cU,cQ,cP){try{bn("getBeaconStrings : eventCode =  "+cQ);var cN=bi.common;var c5=[];var cT=bi[cQ];if(cT==null||cT=="undefined"){bn("getbeaconstrings, return as eventmetrics undefined");return}var cY=[];var c4={};if(!cU.eventCode){cU.eventCode=ad[cQ]}cE(cU,cN,c5,c4);if(cQ=="error"){cU.updateTerminateMetrics();bX(cU,bp)}if(cQ=="complete"){cU.updateTerminateMetrics();var cK=bi.playing;bX(cU,bp);cE(cU,cK,cY,c4)}cE(cU,cT,cY,c4);var cX=c5.join(l.urlParamSeparator);cX=a6(cX);var c2=0;try{for(var c0 in br){if(l.useKey){c2+=br[c0].length+3+l.urlParamSeparator.length}else{c2+=c0.length+3+l.urlParamSeparator.length}}}catch(c3){c2=12}c2--;var cS=l.maxLogLineLength-c2-cX.length-3-l.beaconUrl.length;if(cS<=0){cS=4780-c2-cX.length-3-l.beaconUrl.length}var cZ=[];var cW="";if(cS>0){if(cY.length>0){var c1;var cL="";var cO="";for(c1=0;c1<cY.length;c1++){cO=a6(cY[c1]);if(cO.length>=cS){cZ.push(cO)}else{if(cL.length+cO.length<=cS){if(cL){cL+=l.urlParamSeparator+cO}else{cL=cO}}else{cZ.push(cL);cL=""}}}if(cL!=""){cZ.push(cL)}}var cM=cZ.length;if(cM>1){for(var cV=1;cV<=cM;++cV){cW=cX+l.urlParamSeparator;cW+=((l.useKey?br.partNumber:"partNumber")+"="+cV)+l.urlParamSeparator;cW+=((l.useKey?br.totalParts:"totalParts")+"="+cM)+l.urlParamSeparator;cW+=cZ[cV-1];if(bi[cQ]){at(cW,cP,cU)}}}else{cW=cX+l.urlParamSeparator+cZ[0];at(cW,cP,cU)}}else{var cR=cY.join(l.urlParamSeparator);cR=a6(cR);cW=cX+l.urlParamSeparator+cR;if(bi[cQ]){at(cW,cP,cU)}}}catch(c3){bn("Exception, get beacon Strings:"+c3)}}function bY(e){ba.fLineCount=0;var cK=co(e);ba.akamai=cK;ba.akamai.customDataPopulated=false}function s(){try{var cO="socialShare:";var cK=cO.length;var cL=ba.socialSharingObj;for(var cM in a0){if(cM.indexOf(cO)!=-1){if(cM in ba.dataSent){if(ba.dataSent[cM].count<ba.socialShareLimit){++ba.dataSent[cM].count;if(cL==null){cL[cM.substring(cK)]=a0[cM]}else{if(cM.substring(cK) in cL){cL[cM.substring(cK)]=parseInt(cL[cM.substring(cK)])+parseInt(a0[cM])}else{cL[cM.substring(cK)]=a0[cM]}}}}else{ba.dataSent[cM]={};ba.dataSent[cM].value=a0[cM];ba.dataSent[cM].count=1;cL[cM.substring(cK)]=a0[cM]}delete a0[cM]}}ba.socialSharingObj=cL}catch(cN){bn("Exception,  getFeedbackObj"+cN);ba.socialSharing=null}}function cF(cL){try{var cN=null;if(ba.socialSharingObj!=null){for(var cK in ba.socialSharingObj){if(cN==null){cN=cK+":"+ba.socialSharingObj[cK]+","}else{cN+=cK+":"+ba.socialSharingObj[cK]+","}}}if(cN!=null){cL.socialSharing=cN.substring(0,cN.length-1)}}catch(cM){bn("Exception,  getFeedbackData"+cM);cL.socialSharing=null}ba.socialSharingObj={}}function bq(cM){try{for(var cL in bi){if(bi[cL]){for(var cK=0;cK<bi[cL].length;cK++){if(bi[cL][cK].fallback&&!a0[bi[cL][cK].name]){cs(cM,bi[cL][cK].name,bi[cL][cK].fallback)}}}}}catch(cN){}}function aT(cL){try{var cK=R.streamName?R.streamName:cL.streamName}catch(cM){}try{if(a0.title){cL.title=a0.title}else{cL.title=a0.eventName?a0.eventName:cK}if(a0.eventName){cL.eventName=a0.eventName}else{cL.eventName=a0.title?a0.title:cK}}catch(cM){bn("Exception,  getting title and eventName, "+cM)}}function aX(cP,cS,cM,cK){bn("updating metrics for playing and end events");var cO=cP.akamai;var cQ=0;var cR=cO.playerState;var cL=true;cO.currentStreamTime=parseInt(av(cP));switch(cO.currentState.state){case cb.playing:cO.playerState="PL";if(cS-cO.seekTime>0){cO.updatePlayClockTime(cS-cO.seekTime,cO.currentState.lastEventClockTime,cM)}if(cO.playClockTime<0){cO.playClockTime=0}cO.updatePlayed(cO.currentStreamTime);break;case cb.pause:cO.pauseDuration+=cS;break;case cb.rebuffering:cO.rebufferTime+=cS;cO.curRebufferTime+=cS;O(cO,cM);cO.playerState="B";cQ=cM-cO.curRebufferTime;break;case cb.resumeBuffering:cO.playerState="RB";cO.resumeBufferTime+=cS;break;case cb.ended:cO.updatePlayed(cO.currentStreamTime);break;case cb.seek:if((cM-cO.currentState.timeUpdateClockTime)>0){ao(cO,cM,cO.currentStreamTime,"S")}cO.currentState.timeUpdateClockTime=cM;cO.playerState="SK";break;default:cL=false;break}bQ.getTransitionSession(cO);ao(cO);if(cO.rebufferSession){cd(cO,cR);cO.firstRebufferStartEpoch=cQ}if(cO.playClockTime>5000){cO.isView=1}if(cL){cO.currentState.lastEventClockTime=cM}cO.bytesLoaded=bO(cP);if(cO.played){var e=cO.played;cO.playStreamTime=0;for(var cN=0;cN<e.length;cN++){cO.playStreamTime+=parseInt(e[cN][1]-e[cN][0])}if(cO.logType=="R"){cO.playStreamTime-=cO.lastPlayStreamTime;cO.lastPlayStreamTime+=cO.playStreamTime}}if(cP.paused){cO.playerState="PS"}else{if(cP.ended){cO.playerState="E"}}if(cK){cO.playerState="E"}}function cA(cM){try{var cK="-";if(document&&document.referrer){var cL=document.referrer;cL=cL.split("/",3);if(cL&&cL[2]){cK=cL[2]}}if(window==window.top){cM.pageUrl=a0.pageUrl?a0.pageUrl:document.URL;cM.pageHost=(a0.pageUrl&&aq(a0.pageUrl))?aq(a0.pageUrl):document.location.hostname;cM.pageReferrer=a0.pageReferrer?a0.pageReferrer:(document.referrer?document.referrer:"-");cM.pageReferrerHost=(a0.pageReferrer&&aq(a0.pageReferrer))?aq(a0.pageReferrer):(document.referrer?cK:"-")}else{cM.pageUrl=a0.pageUrl?a0.pageUrl:(document.referrer?document.referrer:"-");cM.pageHost=(a0.pageUrl&&aq(a0.pageUrl))?aq(a0.pageUrl):(document.referrer?cK:"-");cM.pageReferrer=a0.pageReferrer?a0.pageReferrer:"NA";cM.pageReferrerHost=(a0.pageReferrer&&aq(a0.pageReferrer))?aq(a0.pageReferrer):"NA"}}catch(cN){}}function cf(cN,cM){bn("populate custom data, eventCode = "+cM);try{cA(cN);cN.deliveryType=ca(cN);cN.device=a0.device?a0.device:aN;if(cM=="playing"||cM=="complete"||cM=="feedback"||cM=="error"){cF(cN);if((cN.socialSharing==null||cN.socialSharing=="")&&cM=="feedback"&&(!cN.customDataChanged)){--ba.fLineCount;return}}var cL;for(cL in a0){if((cL!="viewerId")&&(cL!="clientId")&&(cL!="viewerDiagnosticsId")){if(!(cL in bV)){cN[cL]=a0[cL]}}}if(bI&&bI.akamai){for(var cK in bI.akamai){cN[cK]=bI.akamai[cK]}}aT(cN);cN.cdn=aC(cN);for(cL in R){if((cL!="viewerId")&&(cL!="clientId")&&(cL!="viewerDiagnosticsId")&&(cL!="pluginVersion")){cN[cL]=R[cL]}}if("pluginVersion" in R){cN.pluginVersion=bw+":"+R.pluginVersion}}catch(cO){bn("Exception,  populate Custom Data , "+cO)}}function q(cR,cO,cQ){try{bn("sendBeacon: eventCode = "+cO);var cN=cR.akamai;var cM=bE();var cU=cM-cN.currentState.lastEventClockTime;if(cO!="init"){cN.logInterval=(cN.lastLogTime<=0)?"0":(cM-cN.lastLogTime)/1000}else{cN.logInterval="0"}if(!cN.customDataPopulated){cf(cN,cO)}cN.serverIp=(b9.serverip)?b9.serverip:"-";cN.fastTCP=(c.ftcp)?c.ftcp:"-";cN.eventCode=ad[cO];if(cN.hLineSentCount>0){cN.lastHTime=(cM-cN.lastHLineSentTime)/1000}else{cN.lastHTime=(cM-cN.lastSLineSentTime)/1000}if(cO=="heartBeat"){var cT=cN.logInterval;cN.logInterval=(cM-cN.lastPLineSentTime)/1000;b0(cN,cM)}if(cN.logInterval<0){cN.logInterval="0"}var cL=false;if(cO=="complete"){cO="playing";cL=true}cN.endOfStream=cR.ended?"1":"0";cN.currentClockTime=cM-cN.startTimer;cN.currentStreamTime=parseInt(av(cR));if(cO=="playStart"){}if(cO=="error"){}if(cO=="playing"&&!cN.playEndMetricsUpdated){if(cL){b0(cN,cM)}bn("send Beacon, updating play and end metrics");aX(cR,cU,cM,cL);ay(cR)}if(!cN.customDataPopulated){bq(cN)}if(!cc){var cS=co(cN);var cK={element:cS,code:(cL)?"complete":cO,synch:cQ};cq.push(cK);if(cO!="heartBeat"){bn("send beacon :configurationPopulated false sequenceId = "+cN.sequenceId);++cN.sequenceId;cN.lastLogTime=cM}else{cN.logInterval=cT}return}if(cO=="playStart"){aP()}cN.populateMetricsFromConfiguration();cN.xViewerId=bT.xViewerId;cN.xViewerIdVersion=bT.xViewerIdVersion;if(cL){bB(cN,"complete",cQ)}else{bB(cN,cO,cQ)}cN.qualityOfExperience=null;cL=false;if(cO=="playing"||cO=="playStart"){cN.clearRelativeMetrics()}if(cO!="heartBeat"){++cN.sequenceId;cN.lastLogTime=cM}else{cN.logInterval=cT}}catch(cP){bn("Exception, send beacon:"+cP)}}function co(cL,cN){var cN=cN||{};try{for(var cK in cL){if((typeof cL[cK]==="object")&&(cL[cK])){cN[cK]=(cL[cK].constructor===Array)?[]:{};co(cL[cK],cN[cK])}else{cN[cK]=cL[cK]}}return cN}catch(cM){}}this.logMessage=function(cK,e){bn(cK,e)};function bn(cO,cL){try{if(H.configURLCsmaDebug==1||H.pageURLCsmaDebug==1||H.configDebug==1){try{if(H.printException){if(cO.indexOf("Exception")!=-1){cL="ERROR"}}}catch(cN){}try{P(cO,cL)}catch(cK){}try{console.log(cO)}catch(cK){}}else{if(!cc){var cM={message:cO,msgType:cL};u.push(cM)}}}catch(cK){}}function P(cL,e){if(e==null||e==""){e="TRACE"}if(cL==null||cL==""){return}if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){AkamaiAnalytics_debugWindow_appendLog(cL,e)}else{var cK={message:cL,msgType:e};u.push(cK)}}function a8(){try{if(H.configURLCsmaDebug==1||H.pageURLCsmaDebug==1||H.configDebug==1){if(H.logStoredMsg){if(typeof AkamaiAnalytics_debugWindow_available=="function"&&AkamaiAnalytics_debugWindow_available()=="1"){if(H.logTimer){bA(H.logTimer)}H.logStoredMsg=false;if(u.length){for(var cK=0;cK<u.length;cK++){bn(u[cK].message,u[cK].msgType)}u=[]}}else{H.logTimer=bx(a8,1000,[])}}}}catch(cL){}}var a3,a,Y;var bW="AkamaiAnalytics_BrowserSessionId";var bk=null;var az=null;var ch=null;var cp=null;var aN=null;var a4=null;if(navigator&&navigator.userAgent){a4=navigator.userAgent}function b7(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent;var cM=/\((\w+)/;var cK=cM.exec(e);az=cK[1].toLowerCase();if(az.indexOf("compatible")!=-1||az.indexOf("windows")!=-1){az="Windows"}else{if(az.indexOf("x11")!=-1){az="Linux"}else{if(az.indexOf("macintosh")!=-1||az.indexOf("mac os")!=-1||az.indexOf("macos")!=-1){az="Mac OS"}else{if(az.indexOf("ipad")!=-1){az="iPad"}else{if(az.indexOf("iphone")!=-1){az="iPhone"}else{if(az.indexOf("ipod")!=-1){az="iOS"}else{if(e.indexOf("Android")!=-1){az="Android"}else{az="Others"}}}}}}}}catch(cL){bn("Exception,  finding Osname");az="Others"}try{cM=/(NT|OS X|Linux|CPU.*?OS) ([0-9\._]+)/;cK=cM.exec(e);cp=cK[2]?cK[2]:""}catch(cL){bn("Exception,  OSVersion"+cL)}}}function J(){if(navigator&&navigator.userAgent){var e=navigator.userAgent;var cM=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var cK=cM.exec(e);bk=cK[1];if(cK[1]=="Version"){cM=/(Opera|Safari)/;var cN=cM.exec(e);bk=cN[1]}}catch(cL){bn("Exception,  browserName"+cL)}try{bn("browser version = "+cK[2]);ch=cK[2];if(bk&&ch){bk=bk+" "+ch}}catch(cL){bn("Exception,  browserVersion"+cL)}}}function bo(){if(navigator&&navigator.userAgent){try{var cK=navigator.userAgent;cK=cK.toLowerCase();if(cK.indexOf("ipad")!=-1){aN="iPad"}else{if(cK.indexOf("iphone")!=-1){aN="iPhone"}else{if(cK.indexOf("android")!=-1){aN="Android Device"}else{if(cK.indexOf("macintosh")!=-1||cK.indexOf("windows")!=-1||cK.indexOf("compatible")!=-1){aN="Desktop"}else{aN="Others"}}}}}catch(cL){bn("Exception,  getitng device name : "+cL);aN="Others"}}}b7();J();bo();var cb={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6};function ck(cK){try{switch(cK){case cb.ended:return"ended";break;case cb.init:return"init";break;case cb.playing:return"playing";break;case cb.pause:return"pause";break;case cb.seek:return"seek";break;case cb.rebuffering:return"rebuffering";break;case cb.resumeBuffering:return"resumeBuffering";break;default:return"undefined";break}}catch(cL){}}var bp=[0,0,0,0,0,0,0,0,0,0,0,0];var z=[0,0,0,0,0,0,0,0,0,0,0,0];var f;var ar="0,0,0,0,0,0,0,0";function aU(e){if(e&&e.customMetrics){for(var cK in e.customMetrics){if(!(cK in bV)){this[cK]=e.customMetrics[cK]}}}this.userAgent=a4;this.playerType="HTML5";this.pluginVersion=bw;this.os=az;this.osVersion=cp;this.browser=bk;this.browserVersion=ch;this.browserSize=window.innerWidth+"x"+window.innerHeight;this.rebufferCount=0;this.bytesLoadedCallback=0;this.lastBytesLoaded=0;this.currRebufferEndEpoch=0;this.totalPlayClockTime=0;this.totalPlayStreamTime=0;this.totalRebufferCount=0;this.totalRebufferTime=0;this.totalPauseCount=0;this.totalPauseDuration=0;this.totalSeekCount=0;this.totalSeekTime=0;this.totalResumeBufferCount=0;this.totalResumeBufferTime=0;this.totalAdPlayClockTime=0;this.totalAdStartCount=0;this.totalAdAbandonCount=0;this.updateTerminateMetrics=function(){try{if(this.playClockTime){this.totalPlayClockTime+=parseInt(this.playClockTime)}if(this.playStreamTime){this.totalPlayStreamTime+=parseInt(this.playStreamTime)}if(this.rebufferCount){this.totalRebufferCount+=parseInt(this.rebufferCount)}if(this.rebufferTime){this.totalRebufferTime+=parseInt(this.rebufferTime)}if(this.pauseCount){this.totalPauseCount+=parseInt(this.pauseCount)}if(this.pauseDuration){this.totalPauseDuration+=parseInt(this.pauseDuration)}if(this.seekCount){this.totalSeekCount+=parseInt(this.seekCount)}if(this.seekTime){this.totalSeekTime+=parseInt(this.seekTime)}if(this.resumeBufferCount){this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)}if(this.resumeBufferTime){this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)}if(this.adPlayClockTime){this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)}if(this.adCount){this.totalAdStartCount+=parseInt(this.adCount)}if(this.adAbandonCount){this.totalAdAbandonCount+=parseInt(this.adAbandonCount)}var cL=bE();this.startupAbondonWaitTime=cL;this.playInterval=cL}catch(cM){bn("Unable to update cumulative metrics")}};this.clearRelativeMetrics=function(){var cL=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var cM=0;cM<cL.length;++cM){this[cL[cM]]=0}this.pauseIntervalsAsString="-";this.seekIntervalsAsString="-";this.pauseSeekSession="-";this.transitionStreamTimeSession="-";this.socialSharing=null;this.adSession=null;ba.socialSharing=null;ba.socialSharingObj={};bQ.bitRateArr=[];delete this.rebufferSession};this.populateMetricsFromConfiguration=function(){this.beaconId=aL.beaconId;this.beaconVersion=aL.beaconVersion;this.logType=(l.logType=="relative")?"R":"C";this.logVersion=l.logVersion;this.startupTimeOutlierLimit=l.startupTimeOutlierLimit;this.formatVersion=l.formatVersion;this.bucketCount=b3.bucketCount;this.bucketLength=b3.bucketLength;for(var cM in bi){if(bi[cM]){for(var cL=0;cL<bi[cM].length;cL++){if(bi[cM][cL].value){this[bi[cM][cL].name]=bi[cM][cL].value}}}}};this.initPlayed=function(cL){this.played.push([cL,cL]);this.playingIndex=0};this.updatePlayClockTime=function(cM,cL,cN){this.playClockTime+=cM;bQ.updateBitRateArr(cM)};this.updatePlayed=function(cL,cO){var cN=this.played;if(!cN){return}for(var cM=0;cM<cN.length;cM++){}for(var cM=this.playingIndex;cM<cN.length&&cL>cN[cM][0];cM++){}if(cM!=this.playingIndex){cN[this.playingIndex][1]=Math.max(cL,cN[cM-1][1]);cN.splice(this.playingIndex+1,cM-this.playingIndex-1)}else{cN[this.playingIndex][1]=Math.max(cL,cN[this.playingIndex][1])}if(cO==null){return}for(cM=0;cM<cN.length;cM++){if(cN[cM][0]<=cO&&cN[cM][1]>=cO){this.playingIndex=cM;return}else{if((cM+1)<cN.length&&cN[cM][1]<cO&&cN[cM+1][0]>cO){cM++;this.playingIndex=cM;cN.splice(cM,0,[cO,cO]);return}}}if(cM==cN.length){cN.push([cO,cO]);this.playingIndex=cM}};this.isVisitEnd=0;this.sequenceId="0";this.isSLineSent=false;this.sendVLine=false;this.played=[];this.iLineCount=0;this.isPlaylist=false;this.isFirstTitle=1;this.currentState={state:cb.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0};this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1};this.clearRelativeMetrics();bn("value of configurationPopulated"+cc);if(cc){this.populateMetricsFromConfiguration()}this.loadStartILine=false;this.canPlayUpdated=false;this.canPlayEventAutoPlay=true;this.format="P";this.playerFormat=this.playerType+":"+this.format;this.deliveryType="O";this.firstTimeProgress=true;this.firstTimePlay=true;this.isILineSent=false;this.seekFrom=0;this.lastPlayStreamTime=0;this.lastPlayLogTime=0;this.lastLogTime=0;this.curRebufferTime=0;this.sendIsSessionWithRebufferH=1}ax.akamai=new aU(ax);function cg(){try{var cL,cK;for(cL in bi){if(bi[cL]){for(cK=0;cK<bi.length;cK++){if(bi[cL][cK].isSent&&bi[cL][cK].isSent===true){bi[cL][cK].isSent=false}}}}}catch(cM){}}function aY(cO){bn("endOfTheSession");var cN=cO.akamai;var cP=cN.isPlaylist;var cL=cN.visitId;var e=cN.viewerId;var cM=cN.streamName;var cR=cN.cdn;var cQ=cN.sendVLine;var cK=cN.iLineCount;var cS=cN.isFirstTitle;cO.akamai=null;cg();cN=cO.akamai=new aU(cO);cN.visitId=cN.browserSessionId=cL;cN.viewerId=cN.clientId=e;cN.cdn=cR;aB=-1;cN.streamName=cM;cN.iLineCount=cK;cO.akamai.clearVisitTimeoutId=bx(cr,l.visitTimeout,[cO,1]);cN.sendVLine=cQ;cN.isFirstTitle=cS;cN.isPlaylist=cP;if(cO.played){cO.played.length=0}bQ.clearBitRate()}function bf(){try{if(this.readyState==4&&this.status==200&&this.responseText){var cP=this.akamai;var cK=this.responseText.split("\n");var cR="";var cO=/PROGRAM-ID=(\d+)/;var cL,cM;if(cK){for(cM=0;cM<cK.length;cM++){if((cL=cO.exec(cK[cM]))){if(cL[1]==cR){break}else{cR=cL[1]}}}if(cM!=cK.length){cP.format="L";cP.playerFormat=cP.playerType+":"+cP.format}}cO=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m;bn("Checking");if((cL=cO.exec(this.responseText))){bn("Checking done "+cL[4]);if(/.m3u8$/.exec(cL[4])){try{var cN=new XMLHttpRequest();cN.open("GET",cL[4],true);cN.onreadystatechange=function(){if(this.readyState==4&&this.status==200){if(this.responseText){if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){cP.deliveryType="O"}}}};if(cN.overrideMimeType){cN.overrideMimeType("text/plain")}cN.send(null)}catch(cQ){bn("parsePlaylist, Exception,  parsing play list, "+cQ)}}else{if(/^#EXT-X-ENDLIST/m.exec(this.responseText)){cP.deliveryType="O"}}}}}catch(cQ){bn("Exception,  parsePlaylist : "+cQ)}}var bS=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];function bz(e){if(bU&&bU.dataset&&bU.dataset.isad&&bU.dataset.isad=="true"){return true}else{return false}}function bG(cL,cK,cO){if(cK=="playing"){b6=[]}var cN=bE();var cM={};cM.eventType=cK;cM.eventTime=cN;if(cO){cM.streamUrl=cO}if(cK=="error"){cM.errorCode=a2(cL)}if(b6&&b6.length>0){var e=b6[b6.length-1];if(e.eventType==cM.eventType&&e.streamUrl==cM.streamUrl){if(cK=="error"){e.errorCode=cM.errorCode}e.eventTime=cM.eventTime}else{b6.push(cM)}}else{b6.push(cM)}}function L(cK,cR,cQ){try{var cP=false;if(b6.length>0){var cM=bE();var cL=b6[b6.length-1];bn("check error events array, previous event is : "+cL.eventType);if(cL.eventType=="error"&&cQ==cL.streamUrl){if(cR=="error"){var cO=a2(cK);if(cL.errorCode==cO){cP=true}else{cP=false}cL.eventTime=cM;cL.errorCode=cO}else{if(cR=="play"&&cL.eventTime&&(cM-cL.eventTime<=2000)){cP=true}}}}}catch(cN){bn("Exception,  checkErrorEventsArray"+cN);cP=false}return cP}function bg(cL){if(bz(cL)){bn("handle Seeking Event : video tag is of type AD, return");return}try{var cN=bE();var cK=parseInt(av(cL));var cP=cL.akamai;var cM=cP.currentState;var cS=cN-cM.lastEventClockTime;var cO=cN-cP.startTimer;var cQ=cM.state;if(cM.state==cb.playing){cP.updatePlayClockTime(cS,cM.lastEventClockTime,cN)}if(cP.isPlaylist&&(cM.state==cb.ended)&&(cP.browser=="Safari")){}cM.lastEventClockTime=cN}catch(cR){bn("Exception,  handle Seeking Event : "+cR)}}function U(cL){if(bz(cL)){bn("handle Seeked Event : video tag is of type AD, return");return}try{var cN=bE();var cK=parseInt(av(cL));var cP=cL.akamai;var cM=cP.currentState;var cS=cN-cM.lastEventClockTime;var cO=cN-cP.startTimer;var cQ=cM.state;bn("entered function handle Seeked Event, currentstate = "+ck(cM.state));if(cQ==cb.pause||cQ==cb.playing||cQ==cb.rebuffering||cM.state==cb.seek){if((cN-cM.timeUpdateClockTime)>0){ao(cP,cN,cK,"S")}switch(cQ){case cb.playing:cP.updatePlayed(cM.timeUpdateStreamTime,cK);cM.lastEventClockTime=cN;cP.updatePlayClockTime(cS,cM.lastEventClockTime,cN);cM.state=cb.seek;cM.seekStartStreamPos=cK;break;case cb.rebuffering:bn("handle seeked event, previous state is rebuffering");cP.rebufferTime+=cS;cP.curRebufferTime+=cS;if(cP.rebufferSessionArrayHLine){cP.rebufferSessionArrayHLine.push(cN)}try{O(cP,cN);cP.curRebufferTime=0}catch(cR){bn("Error...Play"+cR.message)}cM.lastEventClockTime=cN;cM.state=cb.seek;break}}}catch(cR){bn("Exception,  handle Seeked Event :"+cR)}}function Z(cL){if(bz(cL)){bn("handlePauseEvent : video tag is of type AD, return");return}try{bn("entered function handle Pause Event");var cN=bE();var cK=parseInt(av(cL));var cR=cL.akamai;var cM=cR.currentState;var cO=B(cL);if(cR.firstTimePlay||cM.state==cb.pause){return}if(cO&&cO!=0&&cK&&cK!=0){if(Math.abs(cO-cK)<1000){return}}var cT=cN-cM.lastEventClockTime;var cP=cN-cR.startTimer;var cQ=cM.state;switch(cQ){case cb.playing:cR.updatePlayClockTime(cT,cM.lastEventClockTime,cN);++cR.pauseCount;ao(cR,cN,cK,"P");if(cR.pauseSeekSession!="-"){cR.pauseSeekSession+=",P("+cK+":"+cP+")"}else{cR.pauseSeekSession="P("+cK+":"+cP+")"}cR.updatePlayed(cK);break;case cb.rebuffering:++cR.pauseCount;ao(cR,cN,cK,"P");if(cR.pauseSeekSession!="-"){cR.pauseSeekSession+=",P("+cK+":"+cP+")"}else{cR.pauseSeekSession="P("+cK+":"+cP+")"}cR.rebufferTime+=cT;cR.curRebufferTime+=cT;if(cR.rebufferSessionArrayHLine){bn("handlePauseEvent : pushing, rebufferSessionArrayHLine");cR.rebufferSessionArrayHLine.push(cN)}try{O(cR,cN);cR.curRebufferTime=0}catch(cS){bn("Error...Pause"+cS.message)}break}cM.state=cb.pause;cM.pauseStartStreamTime=cK;cM.pauseStartClockTime=cN;cM.lastEventClockTime=cN}catch(cS){bn("Exception,  handlePauseEvent : "+cS)}}function by(cL){try{if(ax&&ax.akamai){bn("handle bit rate switch");try{cL=parseInt(cL)}catch(cO){bn("Exception,bit rate to int :"+cO);return}if(isNaN(cL)){bn("handle bitrate swtich, bite rate isNaN")}var cN=ax.akamai;var cM=cN.currentState;var cK=av(ax);if(bQ.currentBitRate!="-"){if(cL>bQ.currentBitRate){cN.transitionUpSwitchCount++}else{if(cL<bQ.currentBitRate){cN.transitionDownSwitchCount++}}}if(cM&&cM.state==cb.playing){i(ax)}bQ.currentBitRate=cL;bQ.currentStartPos=cK}}catch(cO){bn("Exception, handle bit rate switch:"+cO)}}function am(cL){if(bz(cL)){bn("handle Play Event : video tag is of type AD, return");return}try{var cT=w(cL);if(cL.akamai&&cL.akamai.postRollTimer){bn("handle play event: send the C line without changing set data");bA(cL.akamai.postRollTimer);delete cL.akamai.postRollTimer;ai(cL)}if(!cL.objectBased&&!cT){bn("handle play event, video is null");return}if(L(cL,"play",cT)){bn("handle play Event: play is thrown after error, return, curTime = "+bE());return}bG(cL,"play",cT);var cR=cL.akamai;var cO=bE();var cK=parseInt(av(cL));var cM=cR.currentState;var cU=cO-cM.lastEventClockTime;var cP=cO-cR.startTimer;var cQ=cM.state;bn("entered function handle Play Event, current state = "+ck(cM.state));switch(cQ){case cb.ended:bL(cT,cR);cR.streamUrl=cT;cR.startTimer=cO;cR.streamLength=parseInt(B(cL));if(cT!=null&&cT.indexOf("?")!=-1){cT=cT.substring(0,cT.indexOf("?"))}if(cT!=null&&cT!=""&&(/.m3u8$/.exec(cT))){cR.format="L";cR.playerFormat=cR.playerType+":"+cR.format;cR.deliveryType="L";try{var cN=new XMLHttpRequest();cN.akamai=cR;cN.open("GET",cT,true);cN.onreadystatechange=bf;if(cN.overrideMimeType){cN.overrideMimeType("text/plain")}cN.send(null)}catch(cS){bn("handleplayEvent, Exception,  parsing play list, "+cS)}}aB=-1;cw(cL,false);cR.currentState.state=cb.init;bn(bE()+": handlePlayBackEvent : Setting state to init");cR.currentState.timeUpdateClockTime=cO;cR.currentState.timeUpdateStreamTime=0;cR.currentState.lastEventClockTime=cO;cR.isPlaylist=true;break;case cb.pause:cR.pauseDuration+=cU;if(cR.pauseIntervalsAsString!="-"){cR.pauseIntervalsAsString+=","+cM.pauseStartStreamTime+":"+(cO-cM.pauseStartClockTime)}else{cR.pauseIntervalsAsString=cM.pauseStartStreamTime+":"+(cO-cM.pauseStartClockTime)}if(cR.pauseSeekSession!="-"){cR.pauseSeekSession+=",R("+cM.pauseStartStreamTime+":"+cP+")"}else{cR.pauseSeekSession="R("+cM.pauseStartStreamTime+":"+cP+")"}cR.updatePlayed(cM.pauseStartStreamTime,cK);cR.currentState.lastEventClockTime=cO;++cR.resumeBufferCount;cM.state=cb.resumeBuffering;break;case cb.init:if(!cR.iLineSentTime){cR.iLineSentTime=cO}if(cR.loadStartILine&&!cR.canPlayEventAutoPlay&&!cR.canPlayUpdated){cR.iLineSentTime=cO;cR.canPlayUpdated=true}break}}catch(cS){bn("Exception,  handle Play Event:"+cS)}}function i(cL){if(bz(cL)){bn("handle Playing Event : video tag is of type AD, return");return}try{var cN=bE();var cS=w(ax);if(!cL.objectBased&&!cS){bn("handle playing event, video is null");return}bG(cL,"playing",cS);var cK=parseInt(av(cL));var cQ=cL.akamai;var cM=cQ.currentState;var cT=cN-cM.lastEventClockTime;var cO=cN-cQ.startTimer;var cP=cM.state;bn("entered function handle Playing Event, current State = "+ck(cM.state));switch(cP){case cb.rebuffering:cQ.rebufferTime+=cT;cQ.curRebufferTime+=cT;if(cQ.rebufferSessionArrayHLine){cQ.rebufferSessionArrayHLine.push(cN)}try{O(cQ,cN);cQ.curRebufferTime=0}catch(cR){bn("Error...Play"+cR.message)}break;case cb.pause:case cb.resumeBuffering:cQ.resumeBufferTime+=cT;if(cT==0&&cQ.resumeBufferCount>0){--cQ.resumeBufferCount}break;case cb.init:r(cL,cT,cN,cK);bQ.currentStartPos=cK;break;case cb.ended:bn("handle Playing Event : dispatch play and playing event");am(cL);i(cL);break;case cb.playing:cQ.updatePlayClockTime(cT,cM.lastEventClockTime,cN);break;case cb.seek:if((cN-cM.timeUpdateClockTime)>0){ao(cQ,cN,cK,"S");cQ.updatePlayed(cM.seekStartStreamPos,cK)}break}cM.state=cb.playing;cM.lastEventClockTime=cN}catch(cR){bn("Exception,  handle Playing Event:"+cR)}}function C(cL){if(bz(cL)){bn("handleWaitingEvent : video tag is of type AD, return");return}try{var cP=cL.akamai;if(cP.currentState.state==cb.rebuffering){bn("already inside handleWaiting Event");return}var cN=bE();var cK=parseInt(av(cL));var cM=cP.currentState;var cS=cN-cM.lastEventClockTime;var cO=cN-cP.startTimer;var cQ=cM.state;bn("entered function handle Waiting Event, current state = "+ck(cM.state));switch(cQ){case cb.playing:cP.updatePlayClockTime(cS,cM.lastEventClockTime,cN);++cP.rebufferCount;if(cP.rebufferCount==1&&cP.playerState!="B"){cP.firstRebufferStartEpoch=Math.round(cN)}if(cP.rebufferSessionArrayHLine){bn("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+cN);cP.rebufferSessionArrayHLine.push(cN)}cP.updatePlayed(cK);cM.state=cb.rebuffering;break;case cb.pause:++cP.resumeBufferCount;cM.state=cb.resumeBuffering;break;case cb.init:break}cM.lastEventClockTime=cN;bn("handle waiting event, if now seek starts, stream pos = "+cK);cM.seekStartStreamPos=cK}catch(cR){bn("Exception,  handleWaitingEvent:"+cR)}}function p(e){if(bz(e)){bn("handleAbortEvent : video tag is of type AD, return");return}N(e)}function N(cL){if(bz(cL)){bn("handle Error Event : video tag is of type AD, return");return}try{var cU=w(cL);if(!cL.objectBased&&!cU){bn("handle error event, video is null");return}if(L(cL,"error",cU)){bn("handle Error Event: consecutive error events thrown, return, curTime = "+bE());return}if(cL&&cL.akamai&&!cL.akamai.isILineSent){bn("handle Error Event: calling handle Play Event");am(cL)}bG(cL,"error",cU);var cN=bE();var cK=parseInt(av(cL));var cQ=cL.akamai;var cM=cQ.currentState;var cV=cN-cM.lastEventClockTime;var cO=cN-cQ.startTimer;var cP=cM.state;bn("entered function handle Error Event, current state = "+ck(cM.state));if(cM.state==cb.playing){cQ.updatePlayClockTime(cV,cM.lastEventClockTime,cN)}if(cQ.isELineSent||cQ.isCLineSent){return}var cT=a2(cL);g(cL,cT);cM.state=cb.ended;var cS=parseInt(y("HTML_LastCLineTime"));aY(cL);cM.lastEventClockTime=cN}catch(cR){bn("Exception,  handleErrorEvent:"+cR)}}function bv(cM){if(bz(cM)){bn("handle Ended Event WithDelay : video tag is of type AD, return");return}try{var cO=cM.akamai;var cL=cO.currentState;bn("entered function handle Ended Event WithDelay, current state"+ck(cL.state));var cN=bE();var cK=cN-cL.lastEventClockTime;if(cO.pollingTimer){bA(cO.pollingTimer)}if(bI&&bI.retryTimer){bA(bI.retryTimer)}if(cO.hLineTimer){bA(cO.hLineTimer)}if(cO.fastTCPServerIpTimer){bA(cO.fastTCPServerIpTimer)}if(cO.firstPLineTimer){bA(cO.firstPLineTimer)}if(bI&&bI.retryTimer){bA(bI.retryTimer)}if(cO.postRollTimer){bn("handle Ended Event WithDelay: postRollTimer already started return");return}cf(cO,"complete");bq(cO);cO.postRollTimer=bx(ai,1000,[cM]);bY(cO);cO.customDataPopulated=true;b0(cO,cN);aX(cM,cK,cN,true);cO.playEndMetricsUpdated=true}catch(cP){bn("Exception,  handle Ended Event WithDelay"+cP);ai(cM)}}function ai(cL){try{var cQ=cL.akamai;if(cQ.postRollTimer){bA(cQ.postRollTimer);delete cQ.postRollTimer}if(cQ.firstTimePlay||cQ.isELineSent||cQ.isCLineSent){bn("handle Ended Event : already sent C line, return");return}var cO=bE();var cK=parseInt(av(cL));var cM=cQ.currentState;var cU=cO-cM.lastEventClockTime;var cP=cO-cQ.startTimer;var cR=cM.state;bn("entered function handle Ended Event, current state"+ck(cM.state));if(!cQ.playEndMetricsUpdated){aX(cL,cU,cO,true);cQ.playEndMetricsUpdated=true}cM.state=cb.ended;var cN=aa(cL);if(cQ.streamTitleSwitchReason!=null&&cQ.streamTitleSwitchReason!=""){cN=cQ.streamTitleSwitchReason}bm(cL,cN,false);var cT=parseInt(y("HTML_LastCLineTime"));aY(cL);cM.lastEventClockTime=cO}catch(cS){bn("Exception,  handle Ended Event :"+cS)}}this.setData=function(e,cK){a1(e,cK)};this.handleStreamSwitch=function(){ce()};this.handleTitleSwitch=function(e){cl(e)};this.handleFeedbackEvent=function(){aw()};this.handleApplicationExit=function(){aO()};function a1(cK,cL){try{bn("Set Data("+cK+":"+cL+")");if(cK=="customDataObject"){bH(cL)}else{if(cK=="customDataFunction"){a9=cL}else{if(cK=="viewerId"||cK=="viewerDiagnosticsId"){if(cL==null||cL==""){cL="-"}}try{if(cK.indexOf("std:")!=-1){R[cK.substring(4)]=cL}else{a0[cK]=cL}}catch(cM){a0[cK]=cL}if((cK.indexOf("socialShare:")!=-1)||(cK.indexOf("feedback:")!=-1)){aw()}}}}catch(cM){bn("Exception, Set Data :"+cM)}}function bH(cK){try{if(typeof(cK)=="object"){for(var cL in cK){a1(cL,cK[cL])}}}catch(cM){bn("Exception set custom data object"+cM)}}function ce(){var e=ax.akamai;e.streamTitleSwitchReason="Stream.Switched";ai(ax)}function cl(cL){var cM=ax.akamai;cM.streamTitleSwitchReason="Title.Switched";ai(ax);try{if(cL!=null&&cL!=""){for(var cK in cL){a1(cK,cL[cK])}}}catch(cN){bn("Exception, handle title switch:"+cN)}am(ax);i(ax);try{ax.akamai.currentState.timeUpdateStreamTime=parseInt(av(ax))}catch(cN){bn("Exception,  handleTitleSwitch"+cN)}}function aw(){try{var cP="feedback:";var cK=cP.length;var cO=false;for(var cM in a0){if(cM.indexOf(cP)!=-1){var cL=cM.substring(cK);a0[cL]=a0[cM];delete a0[cM];cO=true}}s();bn("handleFeedbackEvent");if(ba&&ba.shouldSendFLine&&ba.akamai&&(ba.akamai.isCLineSent||ba.akamai.postRollTimer)){if(cO){ba.akamai.customDataChanged=true}if(ba.fLineCount<ba.limit){q(ba,"feedback",false)}++ba.fLineCount;ba.akamai.customDataChanged=false;ba.akamai.socialSharing=null}}catch(cN){bn("Exception, handle feed back event :"+cN)}}function aO(){try{if(!ax.objectBased){bn("application exit, unsubscribe video events");ci(ax)}}catch(cK){}aV()}function ae(cL){if(bz(cL)){return}try{if(af){bn("handle time update event, return as inside background state for idevice");return}var cN=bE();var cK=parseInt(av(cL));var cQ=cL.akamai;if(!cQ){return}if(cQ.postRollTimer){return}var cM=cQ.currentState;var cT=cN-cM.lastEventClockTime;var cP=cN-cQ.startTimer;var cR=cM.state;var cO=cK-cM.timeUpdateStreamTime;if(Math.abs(cO)>=1000&&cQ.isSLineSent){U(cL)}else{if((cO>0)&&(cO<=750)){if(cL.objectBased){if(cM.state==cb.seek){i(cL)}}else{if(!cQ.isSLineSent||cM.state==cb.seek||cM.state==cb.rebuffering){bn("handle time update event,  dispatching playing event,  current Video state is : "+ck(cM.state));i(cL)}}}}cM.timeUpdateClockTime=cN;cM.timeUpdateStreamTime=cK}catch(cS){bn("Exception,  handleTimeupddate :"+cS)}}this.handleSessionInit=function(cK){try{if(cK){if(typeof b8!="object"){b8={}}if(cK.streamHeadPosition){b8.streamHeadPosition=cK.streamHeadPosition}if(cK.streamLength){b8.streamLength=cK.streamLength}if(cK.streamURL){b8.streamURL=cK.streamURL}if(cK.bytesLoaded){b8.bytesLoaded=cK.bytesLoaded}if(cK.customDataFunction){b8.customDataFunction=cK.customDataFunction}if(b8.customDataFunction){a9=b8.customDataFunction}if(cK.firstBitRate){b8.firstBitRate=cK.firstBitRate}if(b8.firstBitRate){by(b8.firstBitRate)}}am(ax)}catch(cL){}};this.handleBitRateSwitch=function(e){by(e)};this.handlePlaying=function(){am(ax);i(ax)};this.handlePlayEnd=function(e){if(ax.objectBased){ax.endReason=e}bv(ax)};this.handleMediaChangedEvent=function(){ai(ax)};this.handlePause=function(){Z(ax)};this.handleResume=function(){am(ax);i(ax)};this.handleBufferStart=function(){C(ax)};this.handleBufferEnd=function(){am(ax);i(ax)};this.handleError=function(cK){try{if(ax.objectBased){ax.errorReason=cK}N(ax)}catch(cL){}};this.handleTimeupdateEvent=function(){ae(ax)};this.updateAdObject=function(e){bc(e)};this.handleAdLoaded=function(cK){try{bb(cK)}catch(cL){}};this.handleAdStarted=function(e){aM(e)};this.handleAdCompleted=function(){G()};this.handleAdFirstQuartile=function(){cz()};this.handleAdMidPoint=function(){b()};this.handleAdThirdQuartile=function(){bZ()};this.handleAdStopped=function(){k()};this.handleAdError=function(){aF()};this.handleSetupAISEvent=function(e,cK,cL){a7(e,cK,cL)};function a7(cK,cM,cO){try{var cL=bI.aisRequestLimit;var cN=bI.aisRequestInterval;bI=new ah();bI.aisRequestInterval=cN;bI.aisRequestLimit=cL;if(!cK){bn("return from ais, platform is null");return}bI.platform=cK;bI.version=cM?cM:"1.0";if(cO){bI.aisCustomDataObj=cO}bI.requestUrl="http://idp.securetve.com/rest/";bI.initUrl=bI.requestUrl+bI.version+"/"+bI.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest";bI.identityUrl=bI.requestUrl+bI.version+"/"+bI.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest";bI.initUrlId="AkamaiAISInitUrl";bI.identityUrlId="AkamaiAISIdentityUrl";o(bI.initUrl,bI.initUrlId)}catch(cP){bI.requestFailed=true}}this.receiveAISInitRequest=function(cM){try{bI.initObj=cM;an(bI.initUrlId);if(bI.initObj==""||bI.initObj==null){bI.requestFailed=true;return}if(bI.requestFailed){return}if(bI.initObj.authenticated){bI.akamai={};bI.akamai.ais_queryToken=bI.initObj.querytoken;if(bI.initObj.idps){var cN=bI.initObj.idps;for(var cK in cN){bI.akamai.ais_idpId=cK;bI.akamai.ais_idpName=cN[cK].name;bI.akamai.ais_idpDisplayName=cN[cK].display_name;bI.akamai.ais_idpUrl=cN[cK].url}}o(bI.identityUrl,bI.identityUrlId)}else{if(!bI.requestFailed){bn("receiveAISInitRequest, retrying the request");++bI.aisRetries;if(bI.aisRetries<bI.aisRequestLimit){bI.retryTimer=bx(o,bI.aisRequestInterval,[bI.initUrl,bI.initUrlId])}}}}catch(cL){bI.requestFailed=true}};this.receiveAISIdentityRequest=function(cL){try{bI.identityObj=cL;an(bI.identityUrlId);if(cL==null||cL==""){return}if(!bI.akamai){bI.akamai={}}if(cL.indentity&&cL.identity.aisuid){bI.akamai.ais_aisuid=cL.identity.aisuid}cm()}catch(cK){bI.requestFailed=true}};function cm(){var cL={};var cN;var cM;try{if(bI&&bI.aisCustomDataObj){if(!bI.akamai){bI.akamai={}}for(var cK in bI.aisCustomDataObj){cN=bI.aisCustomDataObj[cK].split("/");if(cN[0]=="INIT"&&bI.initObj){cL=bI.initObj}else{if(cN[0]=="IDENTITY"&&bI.identityObj){cL=bI.identityObj}}if(cL){for(cM=1;cM<cN.length;cM++){if(cN[cM]&&cL[cN[cM]]){cL=cL[cN[cM]]}}if(typeof(cL)!="object"){bI.akamai[cK]=cL}}}}}catch(cO){bn("Exception,  populateAISCustomData"+cO)}}function o(cL,cN){try{var cK=document.createElement("script");cK.setAttribute("src",cL);cK.id=cN;document.getElementsByTagName("head")[0].appendChild(cK)}catch(cM){bn("Exception,  loading JavaScript File "+cL)}}function an(cM){try{var cK=document.getElementById(cM);cK.parentNode.removeChild(cK)}catch(cL){bn("Exception,  removing script with id "+cM)}}function cj(cK){var cL,e;cL=cK.akamai;cL.pollingTimer=bx(cj,F,[cK]);if(cK){if(cK.isBrightcoveVideo){akamaiBCVideoModule.getVideoPosition(false,ak)}else{ak(0,cK)}}}function ak(e,cM){var cO,cK;var cN=bE();if(ax!=null&&ax.isBrightcoveVideo){ax.currentTime=parseInt(e);cK=parseInt(e*1000);cM=ax}else{cK=parseInt(av(cM))}if(cK=="undefined"||isNaN(cK)||cK==""){return}cO=cM.akamai;var cL=cO.currentState;if(cL.state==cb.ended){return}if(cM.objectBased){ae(cM)}else{if(cL.state==cb.pause||cL.state==cb.seek){return}if((cK!=0)&&(cK===cL.pollingTimerStreamTime)&&(cL.state!=cb.rebuffering)){bn("check stream head position, call handle waiting event");C(cM)}else{cL.pollingTimerStreamTime=cK}}}function av(cL){var cK=0;try{if(cL.objectBased){if(b8&&b8.streamHeadPosition){cK=b8.streamHeadPosition();cL.currentTime=cK}}else{if(bU.currentTime){cK=bU.currentTime;cL.currentTime=cK}}}catch(cM){}if(cK==0&&aB!=-1){cK=aB}if(cK!=0){aB=cK}return(cK*1000)}function B(cK){var cM=0;try{if(cK){if(cK.objectBased){if(b8&&b8.streamLength){cM=b8.streamLength();cK.duration=cM}}else{cM=bU.duration;cK.duration=cM}}}catch(cL){}return(cM*1000)}function w(cL){var cK="";try{if(cL){if(cL.objectBased){if(b8&&b8.streamURL){cK=b8.streamURL();cL.currentSrc=cK}}else{cK=bU.currentSrc;cL.currentSrc=cK}}}catch(cM){}return cK}function bO(cM){var cK=0,cL=0;try{if(cM){if(cM.objectBased){if(b8&&b8.bytesLoaded){cK=parseInt(b8.bytesLoaded());cL=cK-cM.akamai.lastBytesLoaded}}}}catch(cN){}cM.akamai.lastBytesLoaded=cK;if(cL>0){return cL}}function ay(cL){try{var cK={};if(a9!=null){cK=a9();bH(cK)}}catch(cM){}}function bb(cK){try{bn("handle Ad loaded");var cM=ax.akamai;var cL=bE();x.clearAdAnalytics();x.isAdLoaded=true;x.adLoadTime=cL;x.adCount=1;if(cM.postRollTimer){bj(ax);bA(cM.postRollTimer);cM.postRollAd=true;cM.customDataPopulated=false;x.type=2}else{if(cM.isILineSent){if(cM.isSLineSent){Z(ax);x.type=1}else{if(!cM.isSLineSent){if(!cM.adLoadTime){cM.adLoadTime=cL}}}}}bc(cK);if(!cM.isILineSent){aj(false)}}catch(cN){bn("Exception,handle ad loaded:"+cN)}}function aM(cK){try{bn("handle Ad Started");var cL=bE();x.isAdStarted=true;if(!x.isAdLoaded){bb(cK)}x.playBucket=0;x.adStartTime=cL;x.adStartupTime=cL-x.adLoadTime;x.startPos=av(ax);bc(cK)}catch(cM){bn("Exception,handle ad started:"+cM)}}function G(){try{bn("handleAdEnded");x.playBucket="4";bF("0")}catch(cK){bn("Exception,handle ad completed:"+cK)}}function cz(){x.playBucket="1"}function b(){x.playBucket="2"}function bZ(){x.playBucket="3"}function k(){bF("1")}function aF(){bF("3")}function bc(cL){try{var cM=x.setDataArr;bn("populate ad metric");for(var cK=0;cK<cM.length;cK++){if(cM[cK] in cL){x[cM[cK]]=cL[cM[cK]]}}}catch(cN){}}function bF(cM){try{var cO=bE();var cN=ax.akamai;x.endStatus=cM;if(cM!="0"){x.adAbandonCount=1}if(x.isAdLoaded&&x.isAdStarted){x.adPlayClockTime=cO-x.adStartTime}x.adSession=ap();var cK=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"];for(var cL=0;cL<cK.length;cL++){cN[cK[cL]]+=x[cK[cL]]}if(cN.adSession){cN.adSession+=","+x.adSession}else{cN.adSession=x.adSession}x.isAdStarted=false;x.isAdLoaded=false;if(cM!="2"){if(cN){if(cN.postRollAd){cN.postRollAd=null;ai(ax)}else{if(cN.isSLineSent){am(ax);i(ax)}else{if(!cN.isSLineSent){cN.adEndTime=cO}}}}}}catch(cP){bn("Exception,populate ad end:"+cP)}}function ap(){var cK="";var cL=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var cM=0;cM<cL.length;cM++){if((x[cL[cM]]==0)||(x[cL[cM]]!=null&&x[cL[cM]]!="")){cK+=x[cL[cM]]+":"}else{cK+=":"}}cK=cK.substring(0,cK.length-1)}catch(cN){}return cK}function aR(cK){try{if(bz(cK)){return}var cL=cK.akamai;if(cL.firstTimeProgress){}}catch(cM){}}function aE(cK){try{if(bz(cK)){return}var cL=cK.akamai;if(bU.autoplay){am(cK);cL.loadStartILine=true}}catch(cM){}}function b1(cK){try{if(bz(cK)){return}var cL=cK.akamai;if(bU.autoplay){cL.canPlayEventAutoPlay=true}else{cL.canPlayEventAutoPlay=false}}catch(cM){}}function bM(cK){try{if(bz(cK)){return}var cL=cK.akamai;if(cL.firstTimeProgress){cL.firstTimeProgress=false}if(cL.logType=="R"){}}catch(cM){}}function cJ(cK){try{if(bz(cK)){return}var cL=cK.akamai;cL.streamLength=parseInt(B(cK))}catch(cM){}}this.subscribeVideoObject=function(cK){try{if(cK){T(cK)}}catch(cL){}};function T(cL){bn("subscribeToEvents : video = "+cL);var cK=["abort","error","play","pause","playing","waiting","seeking","seeked","ended","timeupdate"];var cN=["progress","load","durationchange"];bU=cL;try{cL.addEventListener("play",bs.play=function(){am(ax)},false);cL.addEventListener("pause",bs.pause=function(){Z(ax)},false);cL.addEventListener("error",bs.error=function(){N(ax)},false);cL.addEventListener("ended",bs.ended=function(){bv(ax)},false);cL.addEventListener("playing",bs.playing=function(){i(ax)},false);cL.addEventListener("waiting",bs.waiting=function(){C(ax)},false);cL.addEventListener("timeupdate",bs.timeupdate=function(){ae(ax)},false);cL.addEventListener("load",bs.load=function(){aR(ax)},false);cL.addEventListener("progress",bs.progress=function(){bM(ax)},false);cL.addEventListener("durationchange",bs.durationchange=function(){cJ(ax)},false);cL.addEventListener("canplay",bs.canplay=function(){b1(ax)},false);cL.addEventListener("loadstart",bs.loadstart=function(){aE(ax)},false);bn("subscribed to events completed")}catch(cM){bn("Exception,  subscribeToEvents,unable to add listeners to video tag :"+cM)}}function ci(cK){try{cK.removeEventListener("play",bs.play,false);cK.removeEventListener("pause",bs.pause,false);cK.removeEventListener("error",bs.error,false);cK.removeEventListener("ended",bs.ended,false);cK.removeEventListener("playing",bs.playing,false);cK.removeEventListener("waiting",bs.waiting,false);cK.removeEventListener("timeupdate",bs.timeupdate,false);cK.removeEventListener("load",bs.load,false);cK.removeEventListener("progress",bs.progress,false);cK.removeEventListener("durationchange",bs.durationchange,false);cK.removeEventListener("canplay",bs.canplay,false);cK.removeEventListener("loadstart",bs.loadstart,false)}catch(cL){bn("Exception, unSubscribeFrom Events:"+cL)}}function be(cM){try{if(typeof(akamaiBCVideoObject)!="undefined"){bU=akamaiBCVideoObject;ax.isBrightcoveVideo=true;initBrightcove()}else{if(ax.objectBased||ax.videoPassed){}else{if(document){var cL=document.getElementsByTagName("video");bn("add MediaEvent Listeners : videos.length "+cL.length);if(cL&&cL.length==0){cL=document.getElementsByTagName("audio")}for(var cK=0;cK<cL.length;++cK){T(cL[cK])}document.addEventListener("DOMNodeInserted",aA,false);document.addEventListener("DOMNodeRemoved",aA,false);document.addEventListener("DOMAttrModified",aA,false)}}}if(cM&&cM.type=="DOMContentLoaded"){document.removeEventListener("load",be,true)}}catch(cN){bn("Exception,  add MediaEvent Listeners :"+cN)}}function aA(e){var cK=e.target;if(cK.nodeType==cK.COMMENT_NODE||cK.tagName==null||(cK.tagName.toLowerCase()!="video"&&cK.tagName.toLowerCase()!="audio")){return}switch(e.type){case"DOMNodeRemoved":if(cK.dataset&&cK.dataset.isad&&cK.dataset.isad=="true"){}else{cr(ax,0)}break;case"DOMNodeInserted":T(cK);break}}function cr(cL,cU){bn("handle Video Unload");var cP=cL.akamai;var cO=parseInt(y("HTML_VisitCountCookie"));try{if(cP&&cP.currentState.state>=cb.init&&cU==0){if(!cP.firstTimePlay){if(cP.isELineSent||cP.isCLineSent){return}var cM="Browser.Close";if(cP.postRollTimer){bA(cP.postRollTimer);delete cP.postRollTimer}bm(cL,cM,true)}else{if(cP.isELineSent||cP.isCLineSent){return}var cS="Browser.Refresh.NoStart";if((bE()-cP.startTimer)>l.initBrowserCloseTime){cS="Browser.Refresh.NoStart.Late"}g(cL,cS,true)}}}catch(cQ){}try{var cT=parseInt(y("HTML_LastCLineTime"));var cN=bE();var cR=(cT+l.visitTimeout)-cN;var cK=parseInt(y("HTML_isPlayingCount"));bn("handle Video Unload: playing cookie =  "+cK+", visit cookie :"+cO);if(cO>=1&&cU==1){if(cR>0){bA(cP.clearVisitTimeoutId);cL.akamai.clearVisitTimeoutId=bx(cr,cR,[cL,1]);return}else{if(cR<=0&&cO>1&&cK>0){bA(cP.clearVisitTimeoutId);cL.akamai.clearVisitTimeoutId=bx(cr,l.visitTimeout,[cL,1]);return}}}bn("handle Video Unload: decrementing HTML_VisitCountCookie");cO=cO-1;a5("HTML_VisitCountCookie",cO);var cO=parseInt(y("HTML_VisitCountCookie"));if(cO===0||isNaN(cO)){if(cP.sendVLine){ag(cL)}}}catch(cQ){}}function aV(){try{if(x.isAdLoaded){bF("2")}}catch(cK){}cr(ax,0)}function cC(cK){bn("handlePagehide");af=true;aV()}function cv(cK){bn("handlePageshow:");try{if(ax&&ax.tagName){bn("handlePageShow: media tag is :"+ax.tagName);if(ax.akamai&&af){bn("handlePageshow: send play and playing on timeupdate");K=true}}}catch(cK){bn("Exception,  handlePagehsow : "+cK)}af=false}function y(cL){var cK=cL+"=";var cN="";try{if(document.cookie.length>0){offset=document.cookie.indexOf(cK);if(offset!=-1){offset+=cK.length;end=document.cookie.indexOf(";",offset);if(end==-1){end=document.cookie.length}cN=document.cookie.substring(offset,end)}}}catch(cM){}return cN}function Q(cK){try{var cO=location.pathname.split("/");var cN=" path=";document.cookie=cK+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;";for(var cL=0;cL<cO.length;cL++){cN+=((cN.substr(-1)!="/")?"/":"")+cO[cL];document.cookie=cK+"=; expires=Thu, 01-Jan-70 00:00:01 GMT;"+cN+";"}}catch(cM){}}function a5(cK,cL){try{if(document){document.cookie=cK+"="+cL+";Path=/;"}}catch(cM){}}function ct(){try{if(az=="iPad"||az=="iPhone"){return true}}catch(cK){return false}}function M(){try{if(ax.objectBased||ax.videoPassed){be()}else{bn("adding MediaEventListeners: DOMContentLoaded");document.addEventListener("DOMContentLoaded",be,false);bn("adding MediaEventListeners: Load");document.addEventListener("load",be,true)}}catch(cK){bn("Exception,  Addding DOMContentLoaded and Load event listeners :"+cK)}if(window){if(ct()){window.addEventListener("pagehide",cC,false);window.addEventListener("pageshow",cv,false)}else{if(typeof(akamaiBCVideoObject)!="undefined"&&window.addEventListener){window.addEventListener("beforeunload",aV,false)}else{if(window.addEventListener){try{window.top.addEventListener("beforeunload",aV,false)}catch(cK){window.addEventListener("beforeunload",aV,false)}}else{if(window.attachEvent){try{window.top.attachEvent("onbeforeunload",aV)}catch(cK){window.attachEvent("onbeforeunload",aV)}}}}}}}M()}if(typeof(akamaiBCVideoObject)!="undefined"){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}else{if(typeof(AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH)!="undefined"){if((AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")==-1&&AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo")==-1)){akaMediaAnalytics=new AkaHTML5MediaAnalytics(null)}}}function setAkamaiMediaAnalyticsData(b,c,a){try{if(akaMediaAnalytics){akaMediaAnalytics.setData(b,c)}}catch(d){}}function setViewerId(a){akamaiSetViewerId(a)}function akamaiSetViewerId(a){if(a==null||a==""){a="-"}setAkamaiMediaAnalyticsData("viewerId",a);setAkamaiMediaAnalyticsData("clientId",a)}function akamaiSetViewerDiagnosticsId(a){if(a==null||a==""){a="-"}setAkamaiMediaAnalyticsData("viewerDiagnosticsId",a)}function akamaiUpdateAdObject(a){if(akaMediaAnalytics){akaMediaAnalytics.updateAdObject(a)}}function akamaiHandleAdStarted(a){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStarted(a)}}function akamaiHandleAdCompleted(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdCompleted()}}function akamaiHandleAdLoaded(a){if(akaMediaAnalytics){akaMediaAnalytics.handleAdLoaded(a)}}function akamaiHandleAdFirstQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdFirstQuartile()}}function akamaiHandleAdMidPoint(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdMidPoint()}}function akamaiHandleAdThirdQuartile(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdThirdQuartile()}}function akamaiHandleAdError(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdError()}}function akamaiHandleAdStopped(){if(akaMediaAnalytics){akaMediaAnalytics.handleAdStopped()}}function akamaiHandleStreamSwitch(){if(akaMediaAnalytics){akaMediaAnalytics.handleStreamSwitch()}}function akamaiHandleTitleSwitch(a){if(akaMediaAnalytics){akaMediaAnalytics.handleTitleSwitch(a)}}function akamaiSetupAIS(a,b,c){if(akaMediaAnalytics){akaMediaAnalytics.handleSetupAISEvent(a,b,c)}}function akamaiHandleBitRateSwitch(a){if(akaMediaAnalytics){akaMediaAnalytics.handleBitRateSwitch(a)}}function akamaiHandleApplicationExit(){if(akaMediaAnalytics){akaMediaAnalytics.handleApplicationExit()}}function akamaiSetVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}}function akamaiSubscribeVideoObject(a){if(akaMediaAnalytics){akaMediaAnalytics.subscribeVideoObject(a)}};